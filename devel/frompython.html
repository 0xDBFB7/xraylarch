<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>10.4. Using Larch from Python &mdash; larch 0.9.23 documentation</title>
    
    <link rel="stylesheet" href="../_static/larchdoc.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.9.23',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../_static/sidebar.js"></script>
    <link rel="top" title="larch 0.9.23 documentation" href="../index.html" />
    <link rel="up" title="10. Programming with Larch" href="index.html" />
    <link rel="prev" title="10.3. Plugins" href="plugins.html" />
  <script type="text/x-mathjax-config">
     MathJax.Hub.Config({
        "TeX": {Macros: {AA : "{\\unicode{x212B}}"}},
        "HTML-CSS": {scale: 90}
  });</script>

  </head>
  <body>
<div style=" color: #c5daba;  text-align: left; height:100px; padding: 0px">
<table><tr><td width=0></td>
  <td width=25% padding=0>
    <a href="../index.html">
       <img src="../_static/larchcones.png" height=90px alt="larchcones"/>
    </a>
  </td><td width=75% padding=0>
      <font size=+4><a href="../index.html" style="color: #772211">
          Larch: X-ray Data Analysis   </a></font>
</td></tr></table>
</div>

    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="plugins.html" title="10.3. Plugins"
             accesskey="P">previous</a> |</li>
   <li>[<a href="../contents.html">contents</a>|</li>
   <li><a href="../downloads/index.html">downloads</a>|</li>
   <li><a href="../tutorial/index.html">tutorial</a>|</li>
   <li><a href="../data/index.html">data</a>|</li>
   <li><a href="../plotting/index.html">plot</a>|</li>
   <li><a href="../fitting/index.html">fit</a>|</li>
   <li><a href="../xafs/index.html">XAFS</a>|</li>
   <li><a href="../xray/index.html">Xray Data</a>|</li>
   <li><a href="../xrf/index.html">XRF</a>|</li>
   <li><a href="index.html">devel</a>]</li>

          <li><a href="index.html" accesskey="U">10. Programming with Larch</a> &raquo;</li> 
      </ul>
    </div>

      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="plugins.html"
                        title="previous chapter">10.3. Plugins</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/devel/frompython.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="using-larch-from-python">
<span id="frompython-section"></span><h1>10.4. Using Larch from Python<a class="headerlink" href="#using-larch-from-python" title="Permalink to this headline">¶</a></h1>
<p>Although Larch contains its own scripting language, this is not Python, and
it is perfectly reasonable to expect that the Larch analysis functionality
be available in Python without using the Larch scripting language at all.
That is, you may want to consider Larch to be a set of Python modules for
the analysis of X-ray spectroscopic and related data.  There are plenty of
good reasons to want to do this, and it is certainly possible.  However,
because Larch is intended for us independent of an installed Python system,
there are two points to keep in mind when using Larch from Python.</p>
<p>First, Larch keeps essentially all its functionality in plugins, which are
not installed into the standard Python tree of installed modules, but into
a folder specific to Larch.  This means that, while Larch can be used from
Python, Python will need to be told about where Larch is installed in order
for the <tt class="docutils literal"><span class="pre">import</span></tt> statements to work.</p>
<span class="target" id="module-larch"></span><dl class="function">
<dt id="larch.use_plugin_path">
<tt class="descclassname">larch.</tt><tt class="descname">use_plugin_path</tt><big>(</big><em>folder_name</em><big>)</big><a class="headerlink" href="#larch.use_plugin_path" title="Permalink to this definition">¶</a></dt>
<dd><p>This python function will add the Plugin folder to Python's
<tt class="docutils literal"><span class="pre">sys.path</span></tt>, allowing python functions to be imported from the modules
in the specified plugin folder.</p>
<p>The argument is the subfolder for each plugin, relative to the
installed Larch plugins (typically <tt class="docutils literal"><span class="pre">/usr/share/larch/plugins</span></tt> for
Unix or Mac OSX or <tt class="docutils literal"><span class="pre">C:\Program</span> <span class="pre">Files\Larch\plugins</span></tt> on Windows).</p>
</dd></dl>

<p>Thus to get the <a class="reference internal" href="../xafs/autobk.html#_xafs.autobk" title="_xafs.autobk"><tt class="xref py py-func docutils literal"><span class="pre">_xafs.autobk()</span></tt></a> function into a Python module, you
would have to do:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">larch</span> <span class="kn">import</span> <span class="n">use_plugin_path</span>
<span class="n">use_plugin_path</span><span class="p">(</span><span class="s">&#39;xafs&#39;</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">autobk</span> <span class="kn">import</span> <span class="n">autobk</span>
</pre></div>
</div>
<p>The second consideration is that many of the functions in the Larch plugins
will only work if they are passed an instance of the Larch interpreter.
This is primarily used inside Larch plugins to create Groups, or to access
data from the builtin <tt class="docutils literal"><span class="pre">_sys</span></tt> module, which requires a namespace (and
working interpreter).  Though you won't need to write Larch scripts inside
python (you <strong>can</strong>, but if you're reading this section, you probably want
to use Python instead of Larch), you probably will need an instance of the
interpreter.  This is easily created, and can then be passed to any of the
plugin functions with the <tt class="docutils literal"><span class="pre">_larch</span></tt> keyword argument.  Thus, while the
above use of <a class="reference internal" href="#larch.use_plugin_path" title="larch.use_plugin_path"><tt class="xref py py-func docutils literal"><span class="pre">use_plugin_path()</span></tt></a> was able to <em>find</em>
<a class="reference internal" href="../xafs/autobk.html#_xafs.autobk" title="_xafs.autobk"><tt class="xref py py-func docutils literal"><span class="pre">_xafs.autobk()</span></tt></a>, to actually use it, you'd have to pass in an instance
of a larch interpreter:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">larch</span> <span class="kn">import</span> <span class="n">use_plugin_path</span><span class="p">,</span> <span class="n">Interpreter</span>
<span class="n">use_plugin_path</span><span class="p">(</span><span class="s">&#39;xafs&#39;</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">autobk</span> <span class="kn">import</span> <span class="n">autobk</span>

<span class="n">use_plugin_path</span><span class="p">(</span><span class="s">&#39;io&#39;</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">xdi</span> <span class="kn">import</span> <span class="n">read_xdi</span>

<span class="n">mylarch</span> <span class="o">=</span> <span class="n">Interpreter</span><span class="p">()</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">read_xdi</span><span class="p">(</span><span class="s">&#39;feo_rt.xdi&#39;</span><span class="p">,</span> <span class="n">_larch</span><span class="o">=</span><span class="n">mylarch</span><span class="p">)</span>
<span class="n">autobk</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">rbkg</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">kweight</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">_larch</span><span class="o">=</span><span class="n">mylarch</span><span class="p">)</span>
</pre></div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="plugins.html" title="10.3. Plugins"
             >previous</a> |</li>
   <li>[<a href="../contents.html">contents</a>|</li>
   <li><a href="../downloads/index.html">downloads</a>|</li>
   <li><a href="../tutorial/index.html">tutorial</a>|</li>
   <li><a href="../data/index.html">data</a>|</li>
   <li><a href="../plotting/index.html">plot</a>|</li>
   <li><a href="../fitting/index.html">fit</a>|</li>
   <li><a href="../xafs/index.html">XAFS</a>|</li>
   <li><a href="../xray/index.html">Xray Data</a>|</li>
   <li><a href="../xrf/index.html">XRF</a>|</li>
   <li><a href="index.html">devel</a>]</li>

          <li><a href="index.html" >10. Programming with Larch</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright Matthew Newville, The University of Chicago, 2012.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2.
    </div>
  </body>
</html>