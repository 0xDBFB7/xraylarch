

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>8. Reading and Writing Data &#8212; larch 0.9.45 documentation</title>
    <link rel="stylesheet" href="../_static/larchdoc.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="9. Plotting and Displaying Data" href="../plotting/index.html" />
    <link rel="prev" title="7.8. Tutorial: Builtin Functions" href="../tutorial/builtins.html" />
  <script type="text/x-mathjax-config">
     MathJax.Hub.Config({ "TeX": {Macros: {AA : "{\\unicode{x212B}}"}},
			 "HTML-CSS": {scale: 90}});
  </script>

  </head><body>
<div style=" color: #c5daba;  text-align: left; height:65px; padding: 0px">
<table border=1>
  <tr>
    <td width=20%>
	<a href="../index.html">
	 <img src="../_static/larchcones.png" height=60px alt="larchcones"/></a>
    </td>
    <td width=75% padding=0>
      <font size=+2>
	<a href="../index.html" style="color:#772211">
	  Larch: Data Analysis Tools for X-ray Spectroscopy
	</a>
      </font>
    </td>
   </tr></table>
</div>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../plotting/index.html" title="9. Plotting and Displaying Data"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../tutorial/builtins.html" title="7.8. Tutorial: Builtin Functions"
             accesskey="P">previous</a> |</li>
   <li>[<a href="../index.html"> Larch</a>|</li>
   <li><a href="../getting_started.html"> Getting Started</a>|</li>
   <li><a href="../xafs/index.html">XAFS Analysis</a>|</li>
   <li><a href="../xray/index.html">X-ray Databases</a>|</li>
   <li><a href="../xrf/index.html">XRF Analysis</a>|</li>
   <li><a href="../fitting/index.html">Curve Fitting</a>|</li>
 
      </ul>
    </div>

      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">8. Reading and Writing Data</a><ul>
<li><a class="reference internal" href="#simple-ascii-column-files">8.1. Simple ASCII Column Files</a></li>
<li><a class="reference internal" href="#athena-project-files">8.2. Athena Project Files</a><ul>
<li><a class="reference internal" href="#reading-athena-project-files">8.2.1. Reading Athena Project Files</a></li>
<li><a class="reference internal" href="#creating-and-writing-to-athena-project-files">8.2.2. Creating and Writing to Athena Project Files</a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-_io">8.3. Using HDF5 Files</a></li>
<li><a class="reference internal" href="#reading-netcdf-files">8.4. Reading NetCDF Files</a></li>
<li><a class="reference internal" href="#reading-tiff-images">8.5. Reading TIFF Images</a></li>
<li><a class="reference internal" href="#working-with-epics-channel-access">8.6. Working with Epics Channel Access</a></li>
<li><a class="reference internal" href="#reading-scan-data-from-aps-beamlines">8.7. Reading Scan Data from APS Beamlines</a></li>
<li><a class="reference internal" href="#reading-xafs-data-interchange-xdi-files">8.8. Reading XAFS Data Interchange (XDI) Files</a></li>
<li><a class="reference internal" href="#saving-and-restoring-larch-groups">8.9. Saving and Restoring Larch Groups</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="../tutorial/builtins.html"
                        title="previous chapter">7.8. Tutorial: Builtin Functions</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="../plotting/index.html"
                        title="next chapter">9. Plotting and Displaying Data</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/data/index.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="reading-and-writing-data">
<span id="data-io-chapter"></span><h1>8. Reading and Writing Data<a class="headerlink" href="#reading-and-writing-data" title="Permalink to this headline">¶</a></h1>
<p>Larch has several built-in functions for reading and writing scientific
data.  The intention is that the types and varieties of supported files
will increase.  In addition, because standard Python modules can be used
from Larch, many types of standard data and image types can be used by
importing the appropriate Python module.  This chapter describes the Larch
functions for data handling.</p>
<span class="target" id="module-_io"></span><div class="section" id="simple-ascii-column-files">
<h2>8.1. Simple ASCII Column Files<a class="headerlink" href="#simple-ascii-column-files" title="Permalink to this headline">¶</a></h2>
<p>A simple way to store small amounts of numerical data, and one that is
widely used in the XAFS community, is to store data in plaintext (ASCII
encoded) data files, with whitespace delimited numbers layed out as a
table, with a fix number of columns and rows indicated by newlines.
Typically a comment character such as “#” is used to signify header
information.  For instance:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># room temperature FeO</span>
<span class="c1"># data from 20-BM, 2001, as part of NXS school</span>
<span class="c1"># powder on tape, 4 layers</span>
<span class="c1"># 2001-08-10T11:10:00</span>
<span class="c1"># Si(111), d_spacing: 3.13553</span>
<span class="c1">#------------------------</span>
<span class="c1">#   energy        xmu               i0</span>
  <span class="mf">6911.7671</span>      <span class="o">-</span><span class="mf">0.35992590E-01</span>    <span class="mf">280101.00</span>
  <span class="mf">6916.8730</span>      <span class="o">-</span><span class="mf">0.39081634E-01</span>    <span class="mf">278863.00</span>
  <span class="mf">6921.7030</span>      <span class="o">-</span><span class="mf">0.42193483E-01</span>    <span class="mf">278149.00</span>
  <span class="mf">6926.8344</span>  <span class="o">-</span><span class="mf">0.45165576E-01</span>  <span class="mf">277292.00</span>
  <span class="mf">6931.7399</span>  <span class="o">-</span><span class="mf">0.47365589E-01</span>  <span class="mf">265707.00</span>
</pre></div>
</div>
<p>This file and others like it can be read with the builtin
<a class="reference internal" href="#_io.read_ascii" title="_io.read_ascii"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_ascii()</span></code></a> function.</p>
<dl class="function">
<dt id="_io.read_ascii">
<code class="descclassname">_io.</code><code class="descname">read_ascii</code><span class="sig-paren">(</span><em>filename</em>, <em>comentchar='#;*%'</em>, <em>labels=None</em><span class="sig-paren">)</span><a class="headerlink" href="#_io.read_ascii" title="Permalink to this definition">¶</a></dt>
<dd><p>opens and read an plaintext data file, returning a new group containing
the data.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>filename</strong> (<em>string</em>) – name of file to read.</li>
<li><strong>commentchar</strong> (<em>string</em>) – string of valid comment characters</li>
<li><strong>labels</strong> (string, <code class="docutils literal notranslate"><span class="pre">None</span></code>, or <code class="docutils literal notranslate"><span class="pre">False</span></code>) – string to split for column labels</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<p>Some examples of <a class="reference internal" href="#_io.read_ascii" title="_io.read_ascii"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_ascii()</span></code></a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">larch</span><span class="o">&gt;</span> <span class="n">g</span> <span class="o">=</span> <span class="n">read_ascii</span><span class="p">(</span><span class="s1">&#39;feo_rt1.dat&#39;</span><span class="p">)</span>
<span class="n">larch</span><span class="o">&gt;</span> <span class="n">show</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
<span class="o">==</span> <span class="n">Group</span> <span class="n">ascii_file</span> <span class="n">feo_rt1</span><span class="o">.</span><span class="n">dat</span><span class="p">:</span> <span class="mi">0</span> <span class="n">methods</span><span class="p">,</span> <span class="mi">8</span> <span class="n">attributes</span> <span class="o">==</span>
  <span class="n">array_labels</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;energy&#39;</span><span class="p">,</span> <span class="s1">&#39;xmu&#39;</span><span class="p">,</span> <span class="s1">&#39;i0&#39;</span><span class="p">]</span>
  <span class="n">attrs</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">Group</span> <span class="n">header</span> <span class="n">attributes</span> <span class="kn">from</span> <span class="nn">feo_rt1.dat</span><span class="o">&gt;</span>
  <span class="n">data</span><span class="p">:</span> <span class="n">array</span><span class="o">&lt;</span><span class="n">shape</span><span class="o">=</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">412</span><span class="p">),</span> <span class="nb">type</span><span class="o">=</span><span class="n">dtype</span><span class="p">(</span><span class="s1">&#39;float64&#39;</span><span class="p">)</span><span class="o">&gt;</span>
  <span class="n">energy</span><span class="p">:</span> <span class="n">array</span><span class="o">&lt;</span><span class="n">shape</span><span class="o">=</span><span class="p">(</span><span class="mi">412</span><span class="p">,),</span> <span class="nb">type</span><span class="o">=</span><span class="n">dtype</span><span class="p">(</span><span class="s1">&#39;float64&#39;</span><span class="p">)</span><span class="o">&gt;</span>
  <span class="n">filename</span><span class="p">:</span> <span class="s1">&#39;feo_rt1.dat&#39;</span>
  <span class="n">header</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;# room temperature FeO&#39;</span><span class="p">,</span> <span class="s1">&#39;# data from 20-BM, 2001, as part of NXS school&#39;</span><span class="p">,</span> <span class="o">...</span> <span class="s1">&#39;#------------------------&#39;</span><span class="p">,</span> <span class="s1">&#39;#   energy        xmu               i0&#39;</span><span class="p">]</span>
  <span class="n">i0</span><span class="p">:</span> <span class="n">array</span><span class="o">&lt;</span><span class="n">shape</span><span class="o">=</span><span class="p">(</span><span class="mi">412</span><span class="p">,),</span> <span class="nb">type</span><span class="o">=</span><span class="n">dtype</span><span class="p">(</span><span class="s1">&#39;float64&#39;</span><span class="p">)</span><span class="o">&gt;</span>
  <span class="n">xmu</span><span class="p">:</span> <span class="n">array</span><span class="o">&lt;</span><span class="n">shape</span><span class="o">=</span><span class="p">(</span><span class="mi">412</span><span class="p">,),</span> <span class="nb">type</span><span class="o">=</span><span class="n">dtype</span><span class="p">(</span><span class="s1">&#39;float64&#39;</span><span class="p">)</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>which reads the data file and sets array names according to the column
labels in the file.   You can be explicit:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">larch</span><span class="o">&gt;</span> <span class="n">g</span> <span class="o">=</span> <span class="n">read_ascii</span><span class="p">(</span><span class="s1">&#39;feo_rt1.dat&#39;</span><span class="p">,</span> <span class="n">labels</span><span class="o">=</span><span class="s1">&#39;a b c&#39;</span><span class="p">)</span>
<span class="n">larch</span><span class="o">&gt;</span> <span class="n">show</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
   <span class="o">==</span> <span class="n">Group</span> <span class="n">ascii_file</span> <span class="n">feo_rt1</span><span class="o">.</span><span class="n">dat</span><span class="p">:</span> <span class="mi">0</span> <span class="n">methods</span><span class="p">,</span> <span class="mi">8</span> <span class="n">attributes</span> <span class="o">==</span>
  <span class="n">a</span><span class="p">:</span> <span class="n">array</span><span class="o">&lt;</span><span class="n">shape</span><span class="o">=</span><span class="p">(</span><span class="mi">412</span><span class="p">,),</span> <span class="nb">type</span><span class="o">=</span><span class="n">dtype</span><span class="p">(</span><span class="s1">&#39;float64&#39;</span><span class="p">)</span><span class="o">&gt;</span>
  <span class="n">array_labels</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">]</span>
  <span class="n">attrs</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">Group</span> <span class="n">header</span> <span class="n">attributes</span> <span class="kn">from</span> <span class="nn">feo_rt1.dat</span><span class="o">&gt;</span>
  <span class="n">b</span><span class="p">:</span> <span class="n">array</span><span class="o">&lt;</span><span class="n">shape</span><span class="o">=</span><span class="p">(</span><span class="mi">412</span><span class="p">,),</span> <span class="nb">type</span><span class="o">=</span><span class="n">dtype</span><span class="p">(</span><span class="s1">&#39;float64&#39;</span><span class="p">)</span><span class="o">&gt;</span>
  <span class="n">c</span><span class="p">:</span> <span class="n">array</span><span class="o">&lt;</span><span class="n">shape</span><span class="o">=</span><span class="p">(</span><span class="mi">412</span><span class="p">,),</span> <span class="nb">type</span><span class="o">=</span><span class="n">dtype</span><span class="p">(</span><span class="s1">&#39;float64&#39;</span><span class="p">)</span><span class="o">&gt;</span>
  <span class="n">data</span><span class="p">:</span> <span class="n">array</span><span class="o">&lt;</span><span class="n">shape</span><span class="o">=</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">412</span><span class="p">),</span> <span class="nb">type</span><span class="o">=</span><span class="n">dtype</span><span class="p">(</span><span class="s1">&#39;float64&#39;</span><span class="p">)</span><span class="o">&gt;</span>
  <span class="n">filename</span><span class="p">:</span> <span class="s1">&#39;feo_rt1.dat&#39;</span>
  <span class="n">header</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;# room temperature FeO&#39;</span><span class="p">,</span> <span class="s1">&#39;# data from 20-BM, 2001, as part of NXS school&#39;</span><span class="p">,</span> <span class="o">...</span> <span class="s1">&#39;#------------------------&#39;</span><span class="p">,</span> <span class="s1">&#39;#   energy        xmu               i0&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>Note that the <cite>data</cite> attribute holds the raw 2D array of numbers read
in from the file, which can also be useful to rename arrays.</p>
<dl class="function">
<dt id="_io.write_ascii">
<code class="descclassname">_io.</code><code class="descname">write_ascii</code><span class="sig-paren">(</span><em>filename</em>, <em>*args</em>, <em>commentchar='#'</em>, <em>label=None</em>, <em>header=None</em><span class="sig-paren">)</span><a class="headerlink" href="#_io.write_ascii" title="Permalink to this definition">¶</a></dt>
<dd><p>opens and writes arrays, scalars, and text to an ASCII file.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>commentchar</strong> – character for comment (‘#’)</li>
<li><strong>label</strong> – array label line (autogenerated)</li>
<li><strong>header</strong> – array of strings for header</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="_io.write_group">
<code class="descclassname">_io.</code><code class="descname">write_group</code><span class="sig-paren">(</span><em>filename</em>, <em>group</em>, <em>scalars=None</em>, <em>arrays=None</em>, <em>arrays_like=None</em>, <em>commentchar='#'</em><span class="sig-paren">)</span><a class="headerlink" href="#_io.write_group" title="Permalink to this definition">¶</a></dt>
<dd><p>write data from a specified group to an ASCII data file.
This is pretty minimal and may work poorly for large groups of complex
data.</p>
</dd></dl>

</div>
<div class="section" id="athena-project-files">
<h2>8.2. Athena Project Files<a class="headerlink" href="#athena-project-files" title="Permalink to this headline">¶</a></h2>
<p>The popular Athena program for XAFS Analysis uses an “Athena Project File”
to store many XAFS spectra and processing parameters.  Larch can read and
extract the data from these project files, and can also write Athena
Project files from existing groups of data.</p>
<div class="section" id="reading-athena-project-files">
<h3>8.2.1. Reading Athena Project Files<a class="headerlink" href="#reading-athena-project-files" title="Permalink to this headline">¶</a></h3>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Larch can read Athena Project Files from Athena version 0.9.21 or later.
If you have a project file older than that, you should be able to open it
with Athena and re-save it into a newer version.</p>
</div>
<dl class="function">
<dt id="_io.read_athena">
<code class="descclassname">_io.</code><code class="descname">read_athena</code><span class="sig-paren">(</span><em>filename</em>, <em>match=None</em>, <em>do_preedge=True</em>, <em>do_bkg=True</em>, <em>do_fft=True</em>, <em>use_hashkey=False</em><span class="sig-paren">)</span><a class="headerlink" href="#_io.read_athena" title="Permalink to this definition">¶</a></dt>
<dd><p>open and read an Athena Project File, returning a group of groups, each
subgroup corresponding to an Athena Group from the project file.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>filename</strong> – name of Athena Project file</li>
<li><strong>match</strong> – string pattern used to limit the imported groups (see Note)</li>
<li><strong>do_preedge</strong> – bool, whether to do pre-edge subtraction</li>
<li><strong>do_bkg</strong> – bool, whether to do XAFS background subtraction</li>
<li><strong>do_fft</strong> – bool, whether to do XAFS Fast Fourier transform</li>
<li><strong>use_hashkey</strong> – bool, whether to use Athena’s hash key as the group name, instead of the Athena label.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">group of groups.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="docutils">
<dt>Notes:</dt>
<dd><ol class="first last arabic simple">
<li>To limit the imported groups, use the pattern in <cite>match</cite>,
using ‘*’ to match ‘all’, ‘?’ to match any single character,
or [sequence] to match any of a sequence of letters.  The match
will always be insensitive to case.</li>
<li><cite>do_preedge</cite>, <cite>do_bkg</cite>, and <cite>do_fft</cite> will attempt to reproduce the
pre-edge, background subtraction, and FFT from Athena by using
the parameters saved in the project file.</li>
<li><cite>use_hashkey=True</cite> will name groups from the internal 5 character
string used by Athena, instead of the group label.</li>
</ol>
</dd>
</dl>
<p>A simple example of reading an Athena Project file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">larch</span><span class="o">&gt;</span> <span class="n">hg_prj</span> <span class="o">=</span> <span class="n">read_athena</span><span class="p">(</span><span class="s1">&#39;Hg.prj&#39;</span><span class="p">)</span>
<span class="n">larch</span><span class="o">&gt;</span> <span class="n">show</span><span class="p">(</span><span class="n">hg_prj</span><span class="p">)</span>
<span class="o">==</span> <span class="n">Group</span> <span class="mh">0x11b001e50</span><span class="p">:</span> <span class="mi">0</span> <span class="n">methods</span><span class="p">,</span> <span class="mi">5</span> <span class="n">attributes</span> <span class="o">==</span>
  <span class="n">HgO</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">Group</span> <span class="mh">0x1c2e6f48d0</span><span class="o">&gt;</span>
  <span class="n">HgS_black</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">Group</span> <span class="mh">0x1c2e6f49d0</span><span class="o">&gt;</span>
  <span class="n">HgS_red</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">Group</span> <span class="mh">0x1c2e6f4ad0</span><span class="o">&gt;</span>
  <span class="n">_athena_header</span><span class="p">:</span> <span class="sa">u</span><span class="s1">&#39;# Athena project file -- Demeter version 0.9.26</span><span class="se">\n</span><span class="s1"># This file created at 2018-06-24T21:55:31</span><span class="se">\n</span><span class="s1"># Using Demeter 0.9.26 with perl 5.026001 and using Larch X.xx on darwin&#39;</span>
  <span class="n">_athena_journal</span><span class="p">:</span> <span class="p">[</span><span class="sa">u</span><span class="s1">&#39;Hg 15nM in 50 mM Na Cacodylate (As-containing buffer) &#39;</span><span class="p">,</span> <span class="sa">u</span><span class="s1">&#39;100 mM NaClO4, pH 6.10&#39;</span><span class="p">,</span> <span class="sa">u</span><span class="s1">&#39;Hg 15nM in 50 mM Na Cacodylate (As-containing buffer) &#39;</span><span class="p">,</span> <span class="sa">u</span><span class="s1">&#39;100 mM NaClO4, pH 6.10&#39;</span><span class="p">]</span>
</pre></div>
</div>
<dl class="function">
<dt id="_io.extract_athenagroup">
<code class="descclassname">_io.</code><code class="descname">extract_athenagroup</code><span class="sig-paren">(</span><em>datagroup</em><span class="sig-paren">)</span><a class="headerlink" href="#_io.extract_athenagroup" title="Permalink to this definition">¶</a></dt>
<dd><p>extracts a group out of an Athena Project File, allowing the file to be
closed.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>datagroup</strong> – group from athena project</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">group with copy of data, allowing safe closing of project file</td>
</tr>
</tbody>
</table>
</dd></dl>

<p>An example using this function to allow extracting 1 group from an Athena
Project would be:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">larch</span><span class="o">&gt;</span> <span class="n">hg_prj</span> <span class="o">=</span> <span class="n">read_athena</span><span class="p">(</span><span class="s1">&#39;Hg.prj&#39;</span><span class="p">)</span>
<span class="n">larch</span><span class="o">&gt;</span> <span class="n">hgo</span> <span class="o">=</span> <span class="n">extract_athenagroup</span><span class="p">(</span><span class="n">hg_prj</span><span class="o">.</span><span class="n">HgO</span><span class="p">)</span>
<span class="n">larch</span><span class="o">&gt;</span> <span class="k">del</span> <span class="n">hg_prj</span>
</pre></div>
</div>
</div>
<div class="section" id="creating-and-writing-to-athena-project-files">
<h3>8.2.2. Creating and Writing to Athena Project Files<a class="headerlink" href="#creating-and-writing-to-athena-project-files" title="Permalink to this headline">¶</a></h3>
<p>You can create an Athena Project File with <a class="reference internal" href="#_io.create_athena" title="_io.create_athena"><code class="xref py py-func docutils literal notranslate"><span class="pre">create_athena()</span></code></a> and then
add a group of XAFS data to that project with the <code class="xref py py-meth docutils literal notranslate"><span class="pre">add_group()</span></code>
method of that project file.  The group is expected to have array names of
<cite>energy</cite> and <cite>i0</cite>, and one of <cite>mu</cite>, <cite>mutrans</cite>, or <cite>mufluor</cite>.</p>
<dl class="function">
<dt id="_io.create_athena">
<code class="descclassname">_io.</code><code class="descname">create_athena</code><span class="sig-paren">(</span><em>filename</em><span class="sig-paren">)</span><a class="headerlink" href="#_io.create_athena" title="Permalink to this definition">¶</a></dt>
<dd><p>Open a new or existing Athena Project File, returning an
<a class="reference internal" href="#module-_io.AthenaProject" title="_io.AthenaProject"><code class="xref py py-class docutils literal notranslate"><span class="pre">AthenaProject</span></code></a> object.  That is, a new project file will be
created if it does not exist, or an existing project will be opened for
reading and writing.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>filename</strong> – name of Athena Project file</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="_io.AthenaProject">
<em class="property">class </em><code class="descclassname">_io.</code><code class="descname">AthenaProject</code><span class="sig-paren">(</span><em>filename</em><span class="sig-paren">)</span><a class="headerlink" href="#_io.AthenaProject" title="Permalink to this definition">¶</a></dt>
<dd><p>A representation of an Athena Project File</p>
</dd></dl>

<span class="target" id="module-_io.AthenaProject"></span><dl class="method">
<dt id="_io.AthenaProject.add_group">
<code class="descclassname">_io.AthenaProject.</code><code class="descname">add_group</code><span class="sig-paren">(</span><em>group</em>, <em>signal=None</em><span class="sig-paren">)</span><a class="headerlink" href="#_io.AthenaProject.add_group" title="Permalink to this definition">¶</a></dt>
<dd><p>add a group of XAFS data to an Athena Project</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>group</strong> – group to be added. See note</li>
<li><strong>signal</strong> – string or <code class="docutils literal notranslate"><span class="pre">None</span></code> name of array to use as main signal</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>if <cite>signal</cite> is not specified, it will be chosen as <cite>mu</cite>, <cite>mutrans</cite>, or
<cite>mufluor</cite> (in that order).</p>
</dd></dl>

<dl class="method">
<dt id="_io.AthenaProject.save">
<code class="descclassname">_io.AthenaProject.</code><code class="descname">save</code><span class="sig-paren">(</span><em>use_gzip=True</em><span class="sig-paren">)</span><a class="headerlink" href="#_io.AthenaProject.save" title="Permalink to this definition">¶</a></dt>
<dd><p>save project to file</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>use_gzip</strong> – bool, whether to use gzip compression for file.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="_io.AthenaProject.read">
<code class="descclassname">_io.AthenaProject.</code><code class="descname">read</code><span class="sig-paren">(</span><em>filename=None</em>, <em>match=None</em>, <em>do_preedge=True</em>, <em>do_bkg=True</em>, <em>do_fft=True</em>, <em>use_hashkey=False</em><span class="sig-paren">)</span><a class="headerlink" href="#_io.AthenaProject.read" title="Permalink to this definition">¶</a></dt>
<dd><p>read from project.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>filename</strong> – name of Athena Project file</li>
<li><strong>match</strong> – string pattern used to limit the imported groups (see Note)</li>
<li><strong>do_preedge</strong> – bool, whether to do pre-edge subtraction</li>
<li><strong>do_bkg</strong> – bool, whether to do XAFS background subtraction</li>
<li><strong>do_fft</strong> – bool, whether to do XAFS Fast Fourier transform</li>
<li><strong>use_hashkey</strong> – bool, whether to use Athena’s hash key as the group name, instead of the Athena label.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<p>The function <code class="xref py py-func docutils literal notranslate"><span class="pre">read_athena()</span></code> above is a wrapper around this method, and
the notes there apply here as well. An important difference is that for
this method the data is retained in the <cite>groups</cite> attribute which is a
Python list of groups for each group in the Athena Project.</p>
<dl class="method">
<dt id="_io.AthenaProject.as_group">
<code class="descclassname">_io.AthenaProject.</code><code class="descname">as_group</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#_io.AthenaProject.as_group" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the Athena Project <cite>groups</cite> attribute (as read by
<a class="reference internal" href="#_io.AthenaProject.read" title="_io.AthenaProject.read"><code class="xref py py-meth docutils literal notranslate"><span class="pre">read()</span></code></a>) to a larch Group of groups.</p>
</dd></dl>

<p>As an example creating and saving an Athena Project file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">larch</span><span class="o">&gt;</span> <span class="n">feo</span> <span class="o">=</span> <span class="n">read_ascii</span><span class="p">(</span><span class="s1">&#39;feo_rt1.dat&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;energy mu i0&#39;</span><span class="p">)</span>
<span class="n">larch</span><span class="o">&gt;</span> <span class="n">autobk</span><span class="p">(</span><span class="n">feo</span><span class="p">,</span> <span class="n">rbkg</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">kweight</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">larch</span><span class="o">&gt;</span> <span class="n">fe2o3</span> <span class="o">=</span> <span class="n">read_ascii</span><span class="p">(</span><span class="s1">&#39;fe2o3_rt1.xmu&#39;</span><span class="p">)</span>
<span class="n">larch</span><span class="o">&gt;</span> <span class="n">autobk</span><span class="p">(</span><span class="n">fe2o3</span><span class="p">,</span> <span class="n">rbkg</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">kweight</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">larch</span><span class="o">&gt;</span> <span class="n">fe_project</span> <span class="o">=</span> <span class="n">create_athena</span><span class="p">(</span><span class="s1">&#39;FeOxides.prj&#39;</span><span class="p">)</span>
<span class="n">larch</span><span class="o">&gt;</span> <span class="n">fe_project</span><span class="o">.</span><span class="n">add_group</span><span class="p">(</span><span class="n">feo</span><span class="p">)</span>
<span class="n">larch</span><span class="o">&gt;</span> <span class="n">fe_project</span><span class="o">.</span><span class="n">add_group</span><span class="p">(</span><span class="n">fe2o3</span><span class="p">)</span>
<span class="n">larch</span><span class="o">&gt;</span> <span class="n">fe_project</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="module-_io">
<span id="using-hdf5-files"></span><h2>8.3. Using HDF5 Files<a class="headerlink" href="#module-_io" title="Permalink to this headline">¶</a></h2>
<p>HDF5 is an increasingly popular data format for scientific data, as it can
efficiently hold very large arrays in a heirarchical format that holds
“metadata” about the data, and can be explored with a variety of tools.
The interface used in Larch is based on <a class="reference external" href="http://code.google.com/p/h5py/">h5py</a>, which should be consulted
for further documentation.</p>
<dl class="function">
<dt id="_io.h5_group">
<code class="descclassname">_io.</code><code class="descname">h5_group</code><span class="sig-paren">(</span><em>filename</em><span class="sig-paren">)</span><a class="headerlink" href="#_io.h5_group" title="Permalink to this definition">¶</a></dt>
<dd><p>opens and maps and HDF5 file to a Larch Group, with HDF5 Groups map as
Larch Groups.  Note that the full set of data is not read and
copied. Instead, the HDF5 file is kept open and data accessed from the
file as needed.</p>
</dd></dl>

<p>An example using <a class="reference internal" href="#_io.h5_group" title="_io.h5_group"><code class="xref py py-func docutils literal notranslate"><span class="pre">h5_group()</span></code></a> shows that one can browse through the
data heirarchy of the HDF5 file, and pick out the needed data:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">larch</span><span class="o">&gt;</span> <span class="n">g</span> <span class="o">=</span> <span class="n">h5group</span><span class="p">(</span><span class="s1">&#39;test.h5&#39;</span><span class="p">)</span>
<span class="n">larch</span><span class="o">&gt;</span> <span class="n">show</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
<span class="o">==</span> <span class="n">Group</span> <span class="n">test</span><span class="o">.</span><span class="n">h5</span><span class="p">:</span> <span class="mi">3</span> <span class="n">symbols</span> <span class="o">==</span>
  <span class="n">attrs</span><span class="p">:</span> <span class="p">{</span><span class="sa">u</span><span class="s1">&#39;Collection Time&#39;</span><span class="p">:</span> <span class="s1">&#39;: Sat Feb 4 13:29:00 2012&#39;</span><span class="p">,</span> <span class="sa">u</span><span class="s1">&#39;Version&#39;</span><span class="p">:</span> <span class="s1">&#39;1.0.0&#39;</span><span class="p">,</span>
          <span class="sa">u</span><span class="s1">&#39;Beamline&#39;</span><span class="p">:</span> <span class="s1">&#39;GSECARS, 13-IDC / APS&#39;</span><span class="p">,</span> <span class="sa">u</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;Epics Scan Data&#39;</span><span class="p">}</span>
  <span class="n">data</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">Group</span> <span class="n">test</span><span class="o">.</span><span class="n">h5</span><span class="o">/</span><span class="n">data</span><span class="o">&gt;</span>
  <span class="n">h5_file</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">HDF5</span> <span class="n">file</span> <span class="s2">&quot;test.h5&quot;</span> <span class="p">(</span><span class="n">mode</span> <span class="n">r</span><span class="p">)</span><span class="o">&gt;</span>
<span class="n">larch</span><span class="o">&gt;</span><span class="n">show</span><span class="p">(</span><span class="n">g</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
<span class="o">==</span> <span class="n">Group</span> <span class="n">test</span><span class="o">.</span><span class="n">h5</span><span class="o">/</span><span class="n">data</span><span class="p">:</span> <span class="mi">5</span> <span class="n">symbols</span> <span class="o">==</span>
  <span class="n">attrs</span><span class="p">:</span> <span class="p">{</span><span class="sa">u</span><span class="s1">&#39;scan_prefix&#39;</span><span class="p">:</span> <span class="s1">&#39;13IDC:&#39;</span><span class="p">,</span> <span class="sa">u</span><span class="s1">&#39;start_time&#39;</span><span class="p">:</span> <span class="s1">&#39;: Sat Feb 4 13:29:00 2012&#39;</span><span class="p">,</span>
        <span class="sa">u</span><span class="s1">&#39;correct_deadtime&#39;</span><span class="p">:</span> <span class="s1">&#39;True&#39;</span><span class="p">,</span> <span class="sa">u</span><span class="s1">&#39;dimension&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
        <span class="sa">u</span><span class="s1">&#39;stop_time&#39;</span><span class="p">:</span> <span class="s1">&#39;: Sat Feb 4 13:44:52 2009&#39;</span><span class="p">}</span>
  <span class="n">environ</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">Group</span> <span class="n">test</span><span class="o">.</span><span class="n">h5</span><span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">environ</span><span class="o">&gt;</span>
  <span class="n">full_xrf</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">Group</span> <span class="n">test</span><span class="o">.</span><span class="n">h5</span><span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">full_xrf</span><span class="o">&gt;</span>
  <span class="n">merged_xrf</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">Group</span> <span class="n">test</span><span class="o">.</span><span class="n">h5</span><span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">merged_xrf</span><span class="o">&gt;</span>
  <span class="n">scan</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">Group</span> <span class="n">test</span><span class="o">.</span><span class="n">h5</span><span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">scan</span><span class="o">&gt;</span>


<span class="n">larch</span><span class="o">&gt;</span> <span class="n">g</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">scan</span><span class="o">.</span><span class="n">sums</span>
<span class="o">&lt;</span><span class="n">HDF5</span> <span class="n">dataset</span> <span class="s2">&quot;det&quot;</span><span class="p">:</span> <span class="n">shape</span> <span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mi">26</span><span class="p">,</span> <span class="mi">26</span><span class="p">),</span> <span class="nb">type</span> <span class="s2">&quot;&lt;f8&quot;</span><span class="o">&gt;</span>

<span class="n">larch</span><span class="o">&gt;</span> <span class="n">imshow</span><span class="p">(</span><span class="n">g</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">scan</span><span class="o">.</span><span class="n">sums</span><span class="p">[</span><span class="mi">8</span><span class="p">:,:,:])</span>
</pre></div>
</div>
<p>This interface is general-purpose but somewhat low-level.  As HDF5 formats
and schemas become standardized, better interfaces can easily be made on
top of this approach.</p>
</div>
<div class="section" id="reading-netcdf-files">
<h2>8.4. Reading NetCDF Files<a class="headerlink" href="#reading-netcdf-files" title="Permalink to this headline">¶</a></h2>
<p>NetCDF4 is an older and less flexible file format than HDF5, but is
efficient for storing array data and still in wide use.</p>
<dl class="function">
<dt id="_io.netcdf_group">
<code class="descclassname">_io.</code><code class="descname">netcdf_group</code><span class="sig-paren">(</span><em>filename</em><span class="sig-paren">)</span><a class="headerlink" href="#_io.netcdf_group" title="Permalink to this definition">¶</a></dt>
<dd><p>returns a group with data from a NetCDF4 file.</p>
</dd></dl>

<dl class="function">
<dt id="_io.netcdf_file">
<code class="descclassname">_io.</code><code class="descname">netcdf_file</code><span class="sig-paren">(</span><em>filename</em>, <em>mode='r'</em><span class="sig-paren">)</span><a class="headerlink" href="#_io.netcdf_file" title="Permalink to this definition">¶</a></dt>
<dd><p>opens and returns a netcdf file.</p>
</dd></dl>

</div>
<div class="section" id="reading-tiff-images">
<h2>8.5. Reading TIFF Images<a class="headerlink" href="#reading-tiff-images" title="Permalink to this headline">¶</a></h2>
<p>TIFF is a popular image format used by many cameras and detectors. The
interface used in Larch is based on code from Chrisoph Gohlke.</p>
<dl class="function">
<dt id="_io.read_tiff">
<code class="descclassname">_io.</code><code class="descname">read_tiff</code><span class="sig-paren">(</span><em>fname</em><span class="sig-paren">)</span><a class="headerlink" href="#_io.read_tiff" title="Permalink to this definition">¶</a></dt>
<dd><p>reads a TIFF image from a TIFF File.  This returns just the image data as an
array, and does return any metadata.</p>
</dd></dl>

<dl class="function">
<dt id="_io.tiff_object">
<code class="descclassname">_io.</code><code class="descname">tiff_object</code><span class="sig-paren">(</span><em>fname</em><span class="sig-paren">)</span><a class="headerlink" href="#_io.tiff_object" title="Permalink to this definition">¶</a></dt>
<dd><p>opens and returns a TIFF file.  This is useful for extracting metadata
and multiple series.</p>
</dd></dl>

</div>
<div class="section" id="working-with-epics-channel-access">
<h2>8.6. Working with Epics Channel Access<a class="headerlink" href="#working-with-epics-channel-access" title="Permalink to this headline">¶</a></h2>
<p>Many synchrotron facilities use the Epics control system.  If the Epics
Channel Access layer, which requires network access and configuration
discussed elsewhere, are set correcty, then Larch can read and write data
from Epics Process Variables (PVs).  The interface used in Larch is based
on <a class="reference external" href="http://pyepics.github.com/pyepics/">pyepics</a>, which should be consulted for further documentation. The
access is encapsulated into three functions:</p>
<dl class="function">
<dt id="_io.caget">
<code class="descclassname">_io.</code><code class="descname">caget</code><span class="sig-paren">(</span><em>PV_name</em>, <em>as_string=False</em><span class="sig-paren">)</span><a class="headerlink" href="#_io.caget" title="Permalink to this definition">¶</a></dt>
<dd><p>get the value of the Process Variable.  The optional <code class="docutils literal notranslate"><span class="pre">as_string</span></code>
argument ensures the returned value is the string representation for the
variable.</p>
</dd></dl>

<dl class="function">
<dt id="_io.caput">
<code class="descclassname">_io.</code><code class="descname">caput</code><span class="sig-paren">(</span><em>PV_name</em>, <em>value</em>, <em>wait=False</em><span class="sig-paren">)</span><a class="headerlink" href="#_io.caput" title="Permalink to this definition">¶</a></dt>
<dd><p>set the value of the Process Variable.  If the optional <code class="docutils literal notranslate"><span class="pre">wait</span></code> is
<code class="docutils literal notranslate"><span class="pre">True</span></code>, the function will not return until the put “completes”. For
some types of data, this may wait for some process (moving a motor,
triggering a detector) to finish before returning.</p>
</dd></dl>

<dl class="function">
<dt id="_io.PV">
<code class="descclassname">_io.</code><code class="descname">PV</code><span class="sig-paren">(</span><em>PV_name</em><span class="sig-paren">)</span><a class="headerlink" href="#_io.PV" title="Permalink to this definition">¶</a></dt>
<dd><p>create and return an Epics PV object for a Process Variable.  This will
have get() and put() methods, and allows you to add callback functions
which will be run with new values everytime the PV value changes.</p>
</dd></dl>

</div>
<div class="section" id="reading-scan-data-from-aps-beamlines">
<h2>8.7. Reading Scan Data from APS Beamlines<a class="headerlink" href="#reading-scan-data-from-aps-beamlines" title="Permalink to this headline">¶</a></h2>
<p>This list is minimal, but can be expanded easily to accomodate more
facilities and beamlines.</p>
<dl class="function">
<dt id="_io.read_mda">
<code class="descclassname">_io.</code><code class="descname">read_mda</code><span class="sig-paren">(</span><em>filename</em>, <em>maxdim=4</em><span class="sig-paren">)</span><a class="headerlink" href="#_io.read_mda" title="Permalink to this definition">¶</a></dt>
<dd><p>read a binary MDA (multi-Dimensional Array) file from the Epics SScan
Record, and return a group based on the scans it contains.  This is not
very well tested – use with caution!</p>
</dd></dl>

<dl class="function">
<dt id="_io.read_gsescan">
<code class="descclassname">_io.</code><code class="descname">read_gsescan</code><span class="sig-paren">(</span><em>filename</em><span class="sig-paren">)</span><a class="headerlink" href="#_io.read_gsescan" title="Permalink to this definition">¶</a></dt>
<dd><p>read a (old-style) GSECARS Escan data file into a group.</p>
</dd></dl>

<dl class="function">
<dt id="_io.read_stepscan">
<code class="descclassname">_io.</code><code class="descname">read_stepscan</code><span class="sig-paren">(</span><em>filename</em><span class="sig-paren">)</span><a class="headerlink" href="#_io.read_stepscan" title="Permalink to this definition">¶</a></dt>
<dd><p>read a GSECARS StepScan data file into a group.</p>
</dd></dl>

</div>
<div class="section" id="reading-xafs-data-interchange-xdi-files">
<h2>8.8. Reading XAFS Data Interchange (XDI) Files<a class="headerlink" href="#reading-xafs-data-interchange-xdi-files" title="Permalink to this headline">¶</a></h2>
<p>The X-ray Data Interchange Format has been developed as part of an effort
to standardize the format of XAFS data files (see <a class="reference external" href="https://github.com/XraySpectroscopy/XAS-Data-Interchange">xdi</a>.)</p>
<dl class="function">
<dt id="_io.read_xdi">
<code class="descclassname">_io.</code><code class="descname">read_xdi</code><span class="sig-paren">(</span><em>filename</em><span class="sig-paren">)</span><a class="headerlink" href="#_io.read_xdi" title="Permalink to this definition">¶</a></dt>
<dd><p>read an XDI data file into a Larch group.</p>
</dd></dl>

</div>
<div class="section" id="saving-and-restoring-larch-groups">
<h2>8.9. Saving and Restoring Larch Groups<a class="headerlink" href="#saving-and-restoring-larch-groups" title="Permalink to this headline">¶</a></h2>
<p>It is often useful to save groups of data and be able to open them again
later.  The <a class="reference internal" href="#_io.save" title="_io.save"><code class="xref py py-func docutils literal notranslate"><span class="pre">save()</span></code></a> / <a class="reference internal" href="#_io.restore" title="_io.restore"><code class="xref py py-func docutils literal notranslate"><span class="pre">restore()</span></code></a> mechanism here allows you to
save the state of a number of Larch groups and use them in another session.</p>
<p>Some precautions should be kept in mind, as not all Larch data is easily
transferrable.  Most importantly, Python functions cannot be saved to any
sort of data that can be recovered in a meaningful way.  This is actually
not as big of a problem as you might expect: you want to save <strong>data</strong>, and
the functions will be present in the later session.  All the built-in Larch
groups and data structures can be saved and restored.</p>
<dl class="function">
<dt id="_io.save">
<code class="descclassname">_io.</code><code class="descname">save</code><span class="sig-paren">(</span><em>filename</em>, <em>list_of_groups</em><span class="sig-paren">)</span><a class="headerlink" href="#_io.save" title="Permalink to this definition">¶</a></dt>
<dd><p>save a set of Larch groups and data into an HDF5 file.</p>
</dd></dl>

<dl class="function">
<dt id="_io.restore">
<code class="descclassname">_io.</code><code class="descname">restore</code><span class="sig-paren">(</span><em>filename</em>, <em>group=None</em><span class="sig-paren">)</span><a class="headerlink" href="#_io.restore" title="Permalink to this definition">¶</a></dt>
<dd><p>recover groups from a Larch ‘save’ file.  If <code class="docutils literal notranslate"><span class="pre">group</span></code> is None, the
groups in the save file will be returned (in the order in which they
were saved).  If <code class="docutils literal notranslate"><span class="pre">group</span></code> is an existing Larch group, the groups in
the save file will be put inside that group, and will not be returned.</p>
</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../plotting/index.html" title="9. Plotting and Displaying Data"
             >next</a> |</li>
        <li class="right" >
          <a href="../tutorial/builtins.html" title="7.8. Tutorial: Builtin Functions"
             >previous</a> |</li>
   <li>[<a href="../index.html"> Larch</a>|</li>
   <li><a href="../getting_started.html"> Getting Started</a>|</li>
   <li><a href="../xafs/index.html">XAFS Analysis</a>|</li>
   <li><a href="../xray/index.html">X-ray Databases</a>|</li>
   <li><a href="../xrf/index.html">XRF Analysis</a>|</li>
   <li><a href="../fitting/index.html">Curve Fitting</a>|</li>
 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright Matthew Newville, The University of Chicago, 2019.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.5.
    </div>
  </body>
</html>