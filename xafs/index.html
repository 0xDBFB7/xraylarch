<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>7. XAFS Analysis &mdash; larch 0.9.23 documentation</title>
    
    <link rel="stylesheet" href="../_static/larchdoc.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.9.23',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/sidebar.js"></script>
    <link rel="top" title="larch 0.9.23 documentation" href="../index.html" />
    <link rel="next" title="7.1. XAFS: Pre-edge Subtraction and Normalization" href="preedge.html" />
    <link rel="prev" title="6.8. Advanced Confidence Intervals and Chi-square maps" href="../fitting/confidence.html" /> 
  </head>
  <body>
<div style=" color: #c5daba;  text-align: left; height:100px; padding: 0px">
<table><tr><td width=0></td>
  <td width=25% padding=0>
    <a href="../index.html">
       <img src="../_static/larchcones.png" height=90px alt="larchcones"/>
    </a>
  </td><td width=75% padding=0>
      <font size=+4><a href="../index.html" style="color: #772211">
          Larch: X-ray Data Analysis   </a></font>
</td></tr></table>
</div>

    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="preedge.html" title="7.1. XAFS: Pre-edge Subtraction and Normalization"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../fitting/confidence.html" title="6.8. Advanced Confidence Intervals and Chi-square maps"
             accesskey="P">previous</a> |</li>
   <li>[&nbsp; <a href="../contents.html">contents</a>|&nbsp;</li>
   <li><a href="../downloads/index.html">downloads</a>|&nbsp;</li>
   <li><a href="../tutorial/index.html">tutorial</a>|&nbsp;</li>
   <li><a href="../data/index.html">data</a>|&nbsp;</li>
   <li><a href="../plotting/index.html">plot</a>|&nbsp;</li>
   <li><a href="../fitting/index.html">fit</a>|&nbsp;</li>
   <li><a href="#">XAFS</a>|&nbsp;</li>
   <li><a href="../xray/index.html">Xray Data</a>|&nbsp;</li>
   <li><a href="../xrf/index.html">XRF</a>|&nbsp;</li>
   <li><a href="../devel/index.html">devel</a> &nbsp;]</li>
 
      </ul>
    </div>

      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="../fitting/confidence.html"
                        title="previous chapter">6.8. Advanced Confidence Intervals and Chi-square maps</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="preedge.html"
                        title="next chapter">7.1. XAFS: Pre-edge Subtraction and Normalization</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/xafs/index.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="xafs-analysis">
<span id="xafs-chapter"></span><h1>7. XAFS Analysis<a class="headerlink" href="#xafs-analysis" title="Permalink to this headline">Â¶</a></h1>
<p>One of the primary motivations for Larch was processing XAFS data.  Larch
was originally conceived to be version 2 of Ifeffit (<span class="citation"><a class="reference internal" href="../biblio.html#citation-ifeffit">Newville</a><span> </span><span>[</span><a class="reference internal" href="../biblio.html#citation-ifeffit">8</a><span>]</span></span>),
replacing and expanding all the XAFS analysis capabilities of that package.</p>
<p>This replacement is essentially complete, with all the main functionality
of Ifeffit available in Larch.  There may still be a few minor features of
Ifeffit that are not yet available, and some features to port from Athena
(<span class="citation"><a class="reference internal" href="../biblio.html#citation-athena">Ravel and Newville</a><span> </span><span>[</span><a class="reference internal" href="../biblio.html#citation-athena">11</a><span>]</span></span>) back to the core library.   There are some slight
differences in implementation details, such that slightly different
numerical results are obtained.  Importantly, some new features are already
available with Larch that were not available with Ifeffit 1.2 and some
small errors in Ifeffit 1.2 have been fixed.</p>
<p>XAFS Analysis can generally be broken into a few separate steps:</p>
<blockquote>
<div><ol class="arabic simple">
<li>Reading in raw data.</li>
<li>Making corrections to the data, and converting to  <img class="math" src="../_images/math/7e398ab434f8ca3b65ac0d2dad7b7c17d806a642.png" alt="\mu(E)"/></li>
<li>Pre-edge background removal and normalization.</li>
<li>Interpreting normalized mu(E) as XANES spectra</li>
<li>Post-edge background removal, conversion to <img class="math" src="../_images/math/6afff318d648d1296604484ebd75631a75bc97b3.png" alt="\chi(k)"/></li>
<li>XAFS Fourier Transform to <img class="math" src="../_images/math/c61ed6f6f9e0f0c66a720cabdac4ad2c8fc5311e.png" alt="\chi(R)"/></li>
<li>Reading and processing FEFF Paths from external files.</li>
<li>Fitting XAFS <img class="math" src="../_images/math/6afff318d648d1296604484ebd75631a75bc97b3.png" alt="\chi(k)"/> to a sum of FEFF paths.</li>
</ol>
</div></blockquote>
<p>Broadly speaking, Larch can do all of these steps.</p>
<span class="target" id="module-_xafs"></span><p>The XAFS-specific functions in Larch are kept in the <a class="reference internal" href="xafsft.html#module-_xafs" title="_xafs"><tt class="xref py py-data docutils literal"><span class="pre">_xafs</span></tt></a> Group,
which can be easily accessed, as this is in the default search path.  The
XAFS functions described here represent the general steps outlined above.
Each of these functions produce several scalar values and arrays for their
results.  Indeed, many of the functions have several output arrays.  In
addition, several of the functions produce groups containing details of fit
results.</p>
<p>To accomodate and help organize the output arrays from these functions, the
XAFS functions here take a <strong>group</strong> argument, which takes a group into
which results are written.  There is a special group, <tt class="docutils literal"><span class="pre">_sys.xafsGroup</span></tt>
that is used as the default group.  When any of these functions gives an
explicit <strong>group</strong> argument, <tt class="docutils literal"><span class="pre">_sys.xafsGroup</span></tt> is set to this group.  When
the <strong>group</strong> argument is omitted, outputs will be written to the most
<tt class="docutils literal"><span class="pre">_sys.xafsGroup</span></tt>, that is, the most recently used group.  For many
analysis scripts where a single data set is being analyzed, using a single
main data group and using the default <tt class="docutils literal"><span class="pre">_sys.xafsGroup</span></tt> can be convenient.
For anything more complicated than a basic script, explicitly specifying
<strong>group</strong> is recommended.</p>
<p>Further details of the various XAFS functionals are described in the sections
listed below.</p>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="preedge.html">7.1. XAFS: Pre-edge Subtraction and Normalization</a><ul>
<li class="toctree-l2"><a class="reference internal" href="preedge.html#example">7.1.1. Example</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="autobk.html">7.2. XAFS: Post-edge Background Subtraction</a><ul>
<li class="toctree-l2"><a class="reference internal" href="autobk.html#the-autobk-function">7.2.1. The <tt class="docutils literal"><span class="pre">autobk()</span></tt> function</a></li>
<li class="toctree-l2"><a class="reference internal" href="autobk.html#the-autobk-algorithm">7.2.2. The AUTOBK Algorithm</a></li>
<li class="toctree-l2"><a class="reference internal" href="autobk.html#examples">7.2.3. Examples</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="utilities.html">7.3. XAFS: Utility functions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="utilities.html#the-ktoe-and-etok-functions">7.3.1. The <tt class="docutils literal"><span class="pre">ktoe()</span></tt> and <tt class="docutils literal"><span class="pre">etok()</span></tt> functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="utilities.html#the-estimate-noise-function">7.3.2. The <tt class="docutils literal"><span class="pre">estimate_noise()</span></tt> function</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="xafsft.html">7.4. XAFS: Fourier Transforms for XAFS</a><ul>
<li class="toctree-l2"><a class="reference internal" href="xafsft.html#overview-of-xafs-fourier-transforms">7.4.1. Overview of XAFS Fourier transforms</a></li>
<li class="toctree-l2"><a class="reference internal" href="xafsft.html#forward-xafs-fourier-transforms">7.4.2. Forward XAFS Fourier transforms (<img class="math" src="../_images/math/657c5d69378805fef7d84d28a0d975683ffbe6b3.png" alt="k{\rightarrow}R"/>)</a></li>
<li class="toctree-l2"><a class="reference internal" href="xafsft.html#reverse-xafs-fourier-transforms">7.4.3. Reverse XAFS Fourier transforms (<img class="math" src="../_images/math/50b2940168e58da9cd70ed1a4a1c3d7e6a0821d0.png" alt="R{\rightarrow}q"/>)</a></li>
<li class="toctree-l2"><a class="reference internal" href="xafsft.html#ftwindow-generating-fourier-transform-windows">7.4.4. <tt class="docutils literal"><span class="pre">ftwindow()</span></tt>: Generating Fourier transform windows</a></li>
<li class="toctree-l2"><a class="reference internal" href="xafsft.html#catalog-of-fourier-transform-window">7.4.5. Catalog of Fourier transform window</a></li>
<li class="toctree-l2"><a class="reference internal" href="xafsft.html#examples-forward-xafs-fourier-transforms">7.4.6. Examples: Forward XAFS Fourier transforms</a></li>
<li class="toctree-l2"><a class="reference internal" href="xafsft.html#examples-reverse-xafs-fourier-transforms-fourier-filtering">7.4.7. Examples: Reverse XAFS Fourier transforms, Fourier Filtering</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="feffpaths.html">7.5. XAFS: Reading and using Feff Paths</a><ul>
<li class="toctree-l2"><a class="reference internal" href="feffpaths.html#feffpath-and-feffpath-groups">7.5.1. <tt class="docutils literal"><span class="pre">feffpath()</span></tt> and FeffPath Groups</a></li>
<li class="toctree-l2"><a class="reference internal" href="feffpaths.html#path2chi-and-ff2chi-generating-for-a-feffpath">7.5.2. <tt class="docutils literal"><span class="pre">path2chi()</span></tt> and <tt class="docutils literal"><span class="pre">ff2chi()</span></tt>: Generating <img class="math" src="../_images/math/6afff318d648d1296604484ebd75631a75bc97b3.png" alt="\chi(k)"/> for a FeffPath</a></li>
<li class="toctree-l2"><a class="reference internal" href="feffpaths.html#the-feffdat-group-full-details-of-the-feff-dat-file">7.5.3. The _feffdat Group: Full Details of the Feff.Dat File</a></li>
<li class="toctree-l2"><a class="reference internal" href="feffpaths.html#the-exafs-equation-using-feff-and-feffpath-groups">7.5.4. The EXAFS Equation using Feff and FeffPath Groups</a></li>
<li class="toctree-l2"><a class="reference internal" href="feffpaths.html#models-for-calculating">7.5.5. Models for Calculating <img class="math" src="../_images/math/93c29bfedc993de115781b4fbb7e3a8b9e8d6b51.png" alt="\sigma^2"/></a></li>
<li class="toctree-l2"><a class="reference internal" href="feffpaths.html#example-reading-a-feff-file">7.5.6. Example:  Reading a FEFF file</a></li>
<li class="toctree-l2"><a class="reference internal" href="feffpaths.html#example-adding-feff-files">7.5.7. Example:  Adding FEFF files</a></li>
<li class="toctree-l2"><a class="reference internal" href="feffpaths.html#example-using-path-parameters-when-adding-feff-files">7.5.8. Example: Using Path Parameters when adding FEFF files</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="feffit.html">7.6. XAFS: Fitting XAFS to Feff Paths</a><ul>
<li class="toctree-l2"><a class="reference internal" href="feffit.html#the-feffit-strategy-for-modeling-exafs-data">7.6.1. The Feffit Strategy for Modeling EXAFS Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="feffit.html#fit-statistics-and-goodness-of-fit-meassures-for-feffit">7.6.2. Fit statistics and goodness-of-fit meassures for <tt class="docutils literal"><span class="pre">feffit()</span></tt></a></li>
<li class="toctree-l2"><a class="reference internal" href="feffit.html#the-feffit-functions-in-larch">7.6.3. The Feffit functions in Larch</a></li>
<li class="toctree-l2"><a class="reference internal" href="feffit.html#feffit-transform">7.6.4. <tt class="docutils literal"><span class="pre">feffit_transform()</span></tt></a></li>
<li class="toctree-l2"><a class="reference internal" href="feffit.html#feffit-dataset">7.6.5. <tt class="docutils literal"><span class="pre">feffit_dataset()</span></tt></a></li>
<li class="toctree-l2"><a class="reference internal" href="feffit.html#feffit">7.6.6. <tt class="docutils literal"><span class="pre">feffit()</span></tt></a></li>
<li class="toctree-l2"><a class="reference internal" href="feffit.html#feffit-report">7.6.7. <tt class="docutils literal"><span class="pre">feffit_report()</span></tt></a></li>
<li class="toctree-l2"><a class="reference internal" href="feffit.html#example-1-simple-fit-with-1-path">7.6.8. Example 1: Simple fit with 1 Path</a></li>
<li class="toctree-l2"><a class="reference internal" href="feffit.html#example-2-fit-1-dataset-with-3-paths">7.6.9. Example 2: Fit 1 dataset with 3 Paths</a></li>
<li class="toctree-l2"><a class="reference internal" href="feffit.html#example-3-fit-3-datasets-with-1-path-each">7.6.10. Example 3: Fit 3 datasets with 1 Path each</a></li>
<li class="toctree-l2"><a class="reference internal" href="feffit.html#example-4-measuring-coordination-number">7.6.11. Example 4: Measuring Coordination number</a></li>
<li class="toctree-l2"><a class="reference internal" href="feffit.html#example-5-comparing-fits-in-different-fit-spaces">7.6.12. Example 5: Comparing Fits in different Fit Spaces</a></li>
</ul>
</li>
</ul>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="preedge.html" title="7.1. XAFS: Pre-edge Subtraction and Normalization"
             >next</a> |</li>
        <li class="right" >
          <a href="../fitting/confidence.html" title="6.8. Advanced Confidence Intervals and Chi-square maps"
             >previous</a> |</li>
   <li>[&nbsp; <a href="../contents.html">contents</a>|&nbsp;</li>
   <li><a href="../downloads/index.html">downloads</a>|&nbsp;</li>
   <li><a href="../tutorial/index.html">tutorial</a>|&nbsp;</li>
   <li><a href="../data/index.html">data</a>|&nbsp;</li>
   <li><a href="../plotting/index.html">plot</a>|&nbsp;</li>
   <li><a href="../fitting/index.html">fit</a>|&nbsp;</li>
   <li><a href="#">XAFS</a>|&nbsp;</li>
   <li><a href="../xray/index.html">Xray Data</a>|&nbsp;</li>
   <li><a href="../xrf/index.html">XRF</a>|&nbsp;</li>
   <li><a href="../devel/index.html">devel</a> &nbsp;]</li>
 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright Matthew Newville, The University of Chicago, 2012.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2.
    </div>
  </body>
</html>