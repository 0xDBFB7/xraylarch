<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>7.1. XAFS Functions: Overview and Naming Conventions &mdash; larch 0.9.23 documentation</title>
    
    <link rel="stylesheet" href="../_static/larchdoc.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.9.23',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/sidebar.js"></script>
    <link rel="top" title="larch 0.9.23 documentation" href="../index.html" />
    <link rel="up" title="7. XAFS Analysis" href="index.html" />
    <link rel="next" title="7.2. XAFS: Pre-edge Subtraction and Normalization" href="preedge.html" />
    <link rel="prev" title="7. XAFS Analysis" href="index.html" /> 
  </head>
  <body>
<div style=" color: #c5daba;  text-align: left; height:100px; padding: 0px">
<table><tr><td width=0></td>
  <td width=25% padding=0>
    <a href="../index.html">
       <img src="../_static/larchcones.png" height=90px alt="larchcones"/>
    </a>
  </td><td width=75% padding=0>
      <font size=+4><a href="../index.html" style="color: #772211">
          Larch: X-ray Data Analysis   </a></font>
</td></tr></table>
</div>

    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="preedge.html" title="7.2. XAFS: Pre-edge Subtraction and Normalization"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="index.html" title="7. XAFS Analysis"
             accesskey="P">previous</a> |</li>
   <li>[<a href="../contents.html">contents</a>|</li>
   <li><a href="../downloads/index.html">downloads</a>|</li>
   <li><a href="../tutorial/index.html">tutorial</a>|</li>
   <li><a href="../data/index.html">data</a>|</li>
   <li><a href="../plotting/index.html">plot</a>|</li>
   <li><a href="../fitting/index.html">fit</a>|</li>
   <li><a href="index.html">XAFS</a>|</li>
   <li><a href="../xray/index.html">Xray Data</a>|</li>
   <li><a href="../xrf/index.html">XRF</a>|</li>
   <li><a href="../devel/index.html">devel</a>]</li>

          <li><a href="index.html" accesskey="U">7. XAFS Analysis</a> &raquo;</li> 
      </ul>
    </div>

      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">7.1. XAFS Functions: Overview and Naming Conventions</a><ul>
<li><a class="reference internal" href="#naming-conventions-for-xafs-arrays">7.1.1. Naming conventions for XAFS arrays</a><ul>
<li><a class="reference internal" href="#group-argument-and-sys-xafsgroup">7.1.1.1. <cite>group</cite> argument and <tt class="docutils literal"><span class="pre">_sys.xafsGroup</span></tt></a></li>
<li><a class="reference internal" href="#first-argument-group-convention">7.1.1.2. First Argument Group convention</a></li>
</ul>
</li>
<li><a class="reference internal" href="#utility-functions-for-xafs">7.1.2. Utility Functions for XAFS</a><ul>
<li><a class="reference internal" href="#the-ktoe-and-etok-functions">7.1.2.1. The <tt class="docutils literal"><span class="pre">ktoe()</span></tt> and <tt class="docutils literal"><span class="pre">etok()</span></tt> functions</a></li>
<li><a class="reference internal" href="#the-estimate-noise-function">7.1.2.2. The <tt class="docutils literal"><span class="pre">estimate_noise()</span></tt> function</a></li>
<li><a class="reference internal" href="#the-xas-deconvolve-function">7.1.2.3. The <tt class="docutils literal"><span class="pre">xas_deconvolve()</span></tt> function</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="index.html"
                        title="previous chapter">7. XAFS Analysis</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="preedge.html"
                        title="next chapter">7.2. XAFS: Pre-edge Subtraction and Normalization</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/xafs/utilities.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="module-_xafs">
<span id="xafs-functions-overview-and-naming-conventions"></span><h1>7.1. XAFS Functions: Overview and Naming Conventions<a class="headerlink" href="#module-_xafs" title="Permalink to this headline">¶</a></h1>
<p>As with most Larch functions, each of the XAFS functions is designed to be
able to act on arbitrary arrays of data to allow maximum flexibility in
processing data.  In addition, many of the Larch XAFS functions can write
out several output values, including both scalaras and arrays.  While
flexible, this could get rather cumbersome, and mean that you would
generally have to keep track of a large set of related arrays.</p>
<div class="section" id="naming-conventions-for-xafs-arrays">
<h2>7.1.1. Naming conventions for XAFS arrays<a class="headerlink" href="#naming-conventions-for-xafs-arrays" title="Permalink to this headline">¶</a></h2>
<p>In Larch, it is most natural to put related data into a Group.  This is
often natural as data read in from a file is already held in a Group.  If a
set of XAFS data is held within a Group, then the Group members named
<cite>energy</cite> and <cite>k</cite> and <cite>chi</cite> can be assumed to have the same standard meaning
for all groups of XAFS Data.  To make this most common usage easy, all of
the XAFS functions follow a couple conventions for working more easily with
Groups tht can work on arbitrary arrays of data, but assume that they will
write output values to a Group.  In addition, the XAFS functions can
usually just be given a Group that follows the expected XAFS naming
convention.  This is not rigidly enforced, and is not exclusive (that is,
you can add data with other names), but following the expected naming
conventions will make processing XAFS data much easier.</p>
<p>The naming convention define a set of <strong>expected names and meaning</strong> for
data arrays and scalars within a Group.  This is summarized in the
<a class="reference internal" href="#xafsnames-table"><em>Table of Conventional Names for an XAFS Group</em></a> below.</p>
<p id="xafsnames-table"><strong>Table of Conventional Names for an XAFS Group</strong> These are the standard names for arrays and
scalars for various data associated with XAFS, including FEFF calculations.  Given are the name,
the physical quantity described, and the name of function that will generate this value.</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="17%" />
<col width="9%" />
<col width="33%" />
<col width="41%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">name</th>
<th class="head">type</th>
<th class="head">meaning</th>
<th class="head">created by</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>energy</td>
<td>array</td>
<td><img class="math" src="../_images/math/cfd13a0f26eb7ef0093319a7669da7dd3771dbac.png" alt="E"/> in eV</td>
<td>original data</td>
</tr>
<tr class="row-odd"><td>mu</td>
<td>array</td>
<td><img class="math" src="../_images/math/126e84ba38f7dece5f0ad64e929b9588b20f6440.png" alt="\mu"/></td>
<td>original data</td>
</tr>
<tr class="row-even"><td>e0</td>
<td>scalar</td>
<td><img class="math" src="../_images/math/f37d8832b95f83a15141f773c32fbcd917dbc036.png" alt="E_0"/></td>
<td><a class="reference internal" href="preedge.html#pre_edge" title="pre_edge"><tt class="xref py py-func docutils literal"><span class="pre">pre_edge()</span></tt></a>, <a class="reference internal" href="preedge.html#find_e0" title="find_e0"><tt class="xref py py-func docutils literal"><span class="pre">find_e0()</span></tt></a></td>
</tr>
<tr class="row-odd"><td>edge_step</td>
<td>scalar</td>
<td><img class="math" src="../_images/math/7e3ed7ab00565e0aaa720bd846a35dce34dad549.png" alt="\Delta \mu"/></td>
<td><a class="reference internal" href="preedge.html#pre_edge" title="pre_edge"><tt class="xref py py-func docutils literal"><span class="pre">pre_edge()</span></tt></a></td>
</tr>
<tr class="row-even"><td>dmude</td>
<td>array</td>
<td><img class="math" src="../_images/math/5b2889108080bbed76def53b84a4472ba0b58856.png" alt="d\mu/dE"/></td>
<td><a class="reference internal" href="preedge.html#pre_edge" title="pre_edge"><tt class="xref py py-func docutils literal"><span class="pre">pre_edge()</span></tt></a></td>
</tr>
<tr class="row-odd"><td>norm</td>
<td>array</td>
<td>normalized <img class="math" src="../_images/math/126e84ba38f7dece5f0ad64e929b9588b20f6440.png" alt="\mu"/></td>
<td><a class="reference internal" href="preedge.html#pre_edge" title="pre_edge"><tt class="xref py py-func docutils literal"><span class="pre">pre_edge()</span></tt></a></td>
</tr>
<tr class="row-even"><td>flat</td>
<td>array</td>
<td>flattened <img class="math" src="../_images/math/126e84ba38f7dece5f0ad64e929b9588b20f6440.png" alt="\mu"/></td>
<td><a class="reference internal" href="preedge.html#pre_edge" title="pre_edge"><tt class="xref py py-func docutils literal"><span class="pre">pre_edge()</span></tt></a></td>
</tr>
<tr class="row-odd"><td>pre_edge</td>
<td>array</td>
<td>pre-edge curve</td>
<td><a class="reference internal" href="preedge.html#pre_edge" title="pre_edge"><tt class="xref py py-func docutils literal"><span class="pre">pre_edge()</span></tt></a></td>
</tr>
<tr class="row-even"><td>post_edge</td>
<td>array</td>
<td>normalization curve</td>
<td><a class="reference internal" href="preedge.html#pre_edge" title="pre_edge"><tt class="xref py py-func docutils literal"><span class="pre">pre_edge()</span></tt></a></td>
</tr>
<tr class="row-odd"><td>bkg</td>
<td>array</td>
<td><img class="math" src="../_images/math/45f2cf4bd561e5c84cbbd0cee036014c2c9a8f01.png" alt="\mu_0(E)"/></td>
<td><a class="reference internal" href="autobk.html#_xafs.autobk" title="_xafs.autobk"><tt class="xref py py-func docutils literal"><span class="pre">autobk()</span></tt></a></td>
</tr>
<tr class="row-even"><td>chie</td>
<td>array</td>
<td><img class="math" src="../_images/math/b23b00a7478849245e3d63b024cf6684331fd3fa.png" alt="\chi(E)"/></td>
<td><a class="reference internal" href="autobk.html#_xafs.autobk" title="_xafs.autobk"><tt class="xref py py-func docutils literal"><span class="pre">autobk()</span></tt></a></td>
</tr>
<tr class="row-odd"><td>k</td>
<td>array</td>
<td><img class="math" src="../_images/math/e9203da50e1059455123460d4e716c9c7f440cc3.png" alt="k"/></td>
<td><a class="reference internal" href="autobk.html#_xafs.autobk" title="_xafs.autobk"><tt class="xref py py-func docutils literal"><span class="pre">autobk()</span></tt></a></td>
</tr>
<tr class="row-even"><td>chi</td>
<td>array</td>
<td><img class="math" src="../_images/math/6afff318d648d1296604484ebd75631a75bc97b3.png" alt="\chi(k)"/></td>
<td><a class="reference internal" href="autobk.html#_xafs.autobk" title="_xafs.autobk"><tt class="xref py py-func docutils literal"><span class="pre">autobk()</span></tt></a></td>
</tr>
<tr class="row-odd"><td>kwin</td>
<td>array</td>
<td><img class="math" src="../_images/math/19ee175593fd626963a98a790e4393928f2a2894.png" alt="\Omega(k)"/></td>
<td><a class="reference internal" href="xafsft.html#_xafs.xftf" title="_xafs.xftf"><tt class="xref py py-func docutils literal"><span class="pre">xftf()</span></tt></a>, <a class="reference internal" href="xafsft.html#_xafs.ftwindow" title="_xafs.ftwindow"><tt class="xref py py-func docutils literal"><span class="pre">ftwindow()</span></tt></a></td>
</tr>
<tr class="row-even"><td>r</td>
<td>array</td>
<td><img class="math" src="../_images/math/9d86170e7de539c0ff999de09621ee0c7b6c8ed0.png" alt="R"/></td>
<td><a class="reference internal" href="xafsft.html#_xafs.xftf" title="_xafs.xftf"><tt class="xref py py-func docutils literal"><span class="pre">xftf()</span></tt></a></td>
</tr>
<tr class="row-odd"><td>chir</td>
<td>array</td>
<td><img class="math" src="../_images/math/c61ed6f6f9e0f0c66a720cabdac4ad2c8fc5311e.png" alt="\chi(R)"/> (complex)</td>
<td><a class="reference internal" href="xafsft.html#_xafs.xftf" title="_xafs.xftf"><tt class="xref py py-func docutils literal"><span class="pre">xftf()</span></tt></a></td>
</tr>
<tr class="row-even"><td>chir_mag</td>
<td>array</td>
<td><img class="math" src="../_images/math/232a1d1476253b030a3323cb57a42e49f4521c52.png" alt="|\chi(R)|"/></td>
<td><a class="reference internal" href="xafsft.html#_xafs.xftf" title="_xafs.xftf"><tt class="xref py py-func docutils literal"><span class="pre">xftf()</span></tt></a></td>
</tr>
<tr class="row-odd"><td>chir_re</td>
<td>array</td>
<td><img class="math" src="../_images/math/a137b3b3207f753cfd85ff84d4b9c23b068e06a0.png" alt="\rm Re[\chi(R)]"/></td>
<td><a class="reference internal" href="xafsft.html#_xafs.xftf" title="_xafs.xftf"><tt class="xref py py-func docutils literal"><span class="pre">xftf()</span></tt></a></td>
</tr>
<tr class="row-even"><td>chir_im</td>
<td>array</td>
<td><img class="math" src="../_images/math/c2c60aa563030f3a9597fc7f1aea7c0fb507f4bc.png" alt="\rm Im[\chi(R)]"/></td>
<td><a class="reference internal" href="xafsft.html#_xafs.xftf" title="_xafs.xftf"><tt class="xref py py-func docutils literal"><span class="pre">xftf()</span></tt></a></td>
</tr>
<tr class="row-odd"><td>rwin</td>
<td>array</td>
<td><img class="math" src="../_images/math/0ec554843f4950745c1865b530ae121f3a0e87a7.png" alt="\Omega(R)"/></td>
<td><a class="reference internal" href="xafsft.html#_xafs.xftr" title="_xafs.xftr"><tt class="xref py py-func docutils literal"><span class="pre">xftr()</span></tt></a></td>
</tr>
<tr class="row-even"><td>q</td>
<td>array</td>
<td><img class="math" src="../_images/math/23f1b45408e5b4130c0f940fcbfcec54492cbdcd.png" alt="q"/></td>
<td><a class="reference internal" href="xafsft.html#_xafs.xftr" title="_xafs.xftr"><tt class="xref py py-func docutils literal"><span class="pre">xftr()</span></tt></a></td>
</tr>
<tr class="row-odd"><td>chiq</td>
<td>array</td>
<td><img class="math" src="../_images/math/189fbf067e70310d645f491b8c7f61a4c20836c9.png" alt="\chi(q)"/> (complex)</td>
<td><a class="reference internal" href="xafsft.html#_xafs.xftr" title="_xafs.xftr"><tt class="xref py py-func docutils literal"><span class="pre">xftr()</span></tt></a></td>
</tr>
<tr class="row-even"><td>chiq_mag</td>
<td>array</td>
<td><img class="math" src="../_images/math/413fd062b570a4d2052d2a722ffe19b727d96b9b.png" alt="|\chi(q)|"/></td>
<td><a class="reference internal" href="xafsft.html#_xafs.xftr" title="_xafs.xftr"><tt class="xref py py-func docutils literal"><span class="pre">xftr()</span></tt></a></td>
</tr>
<tr class="row-odd"><td>chiq_re</td>
<td>array</td>
<td><img class="math" src="../_images/math/a470a15c407f265d0410db5047f067a2fb1264b8.png" alt="\rm Re[\chi(q)]"/></td>
<td><a class="reference internal" href="xafsft.html#_xafs.xftr" title="_xafs.xftr"><tt class="xref py py-func docutils literal"><span class="pre">xftr()</span></tt></a></td>
</tr>
<tr class="row-even"><td>chiq_im</td>
<td>array</td>
<td><img class="math" src="../_images/math/564a269c9913cc5f4b541f97f01a5eb818551a93.png" alt="\rm Im[\chi(q)]"/></td>
<td><a class="reference internal" href="xafsft.html#_xafs.xftr" title="_xafs.xftr"><tt class="xref py py-func docutils literal"><span class="pre">xftr()</span></tt></a></td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>where <img class="math" src="../_images/math/23f1b45408e5b4130c0f940fcbfcec54492cbdcd.png" alt="q"/>, <img class="math" src="../_images/math/189fbf067e70310d645f491b8c7f61a4c20836c9.png" alt="\chi(q)"/>, and so on indicates back-transformed <img class="math" src="../_images/math/e9203da50e1059455123460d4e716c9c7f440cc3.png" alt="k"/>.</p>
<p>The XAFS functions encourage following this convention, in that they are consistent in wanting
<img class="math" src="../_images/math/6afff318d648d1296604484ebd75631a75bc97b3.png" alt="\chi(k)"/> to be represented by the two arrays <tt class="docutils literal"><span class="pre">GROUP.k</span></tt> and <tt class="docutils literal"><span class="pre">GROUP.chi</span></tt></p>
<div class="section" id="group-argument-and-sys-xafsgroup">
<h3>7.1.1.1. <cite>group</cite> argument and <tt class="docutils literal"><span class="pre">_sys.xafsGroup</span></tt><a class="headerlink" href="#group-argument-and-sys-xafsgroup" title="Permalink to this headline">¶</a></h3>
<p>The XAFS functions need to write outputs to some group -- there are simply too many outputs to
return and expect you to manage.   So, all functions take a <strong>group</strong> argument, which is used
as the group into which results are written.  Again, this allows maximum flexibility, but gets
tedious to provide this argument repeatedly when working with a particular data set.</p>
<p>There is also a special group, <tt class="docutils literal"><span class="pre">_sys.xafsGroup</span></tt> that is used as the default group to write
outputs to if no <strong>group</strong> argument is supplied.  When an an explicit <strong>group</strong> argument is given,
<tt class="docutils literal"><span class="pre">_sys.xafsGroup</span></tt> is set to this group.  This means that when working with a set of XAFS data all
contained within a single group (which is expected to be the normal case), the <strong>group</strong> argument
does not need to be typed repeatedly.</p>
</div>
<div class="section" id="first-argument-group-convention">
<span id="index-0"></span><h3>7.1.1.2. First Argument Group convention<a class="headerlink" href="#first-argument-group-convention" title="Permalink to this headline">¶</a></h3>
<p>In addition to the <tt class="docutils literal"><span class="pre">_sys.xafsGroup</span></tt> convention above, there is an even simpler approach when
working with Groups that follow the XAFS naming conventions.  While the XAFS functions are
generally meant to take arrays of data as the first two arguments, they allow the first argument to
be a Group if that Group has the expected named arrays.  This convention, known as the <strong>First
Argument Group</strong> convention is worth understanding and using.  For example, the <a class="reference internal" href="autobk.html#_xafs.autobk" title="_xafs.autobk"><tt class="xref py py-func docutils literal"><span class="pre">autobk()</span></tt></a>
function generally expects the first argument to be an array of energy values and the second to be
an array of absorbance values.  But a normal use case would look like:</p>
<div class="highlight-python"><div class="highlight"><pre>autobk(dat.energy, dat.mu, group=dat, rbkg=1, ....)
</pre></div>
</div>
<p>This can be abbreviated as:</p>
<div class="highlight-python"><div class="highlight"><pre>autobk(dat, rbkg=1, ....)
</pre></div>
</div>
<p>That is, as long as the Group <tt class="docutils literal"><span class="pre">dat</span></tt> follows the XAFS naming conventions (for <a class="reference internal" href="autobk.html#_xafs.autobk" title="_xafs.autobk"><tt class="xref py py-func docutils literal"><span class="pre">autobk()</span></tt></a> that
it has an energy array named <tt class="docutils literal"><span class="pre">energy</span></tt> and absorbance array named <tt class="docutils literal"><span class="pre">mu</span></tt>) the two forms above are
equivalent.  This nearly makes the Larch XAFS functions be object-oriented, or in this case,
<strong>Group oriented</strong>.</p>
</div>
</div>
<div class="section" id="utility-functions-for-xafs">
<h2>7.1.2. Utility Functions for XAFS<a class="headerlink" href="#utility-functions-for-xafs" title="Permalink to this headline">¶</a></h2>
<p>Listed below are some general purpose functions for XAFS.</p>
<div class="section" id="the-ktoe-and-etok-functions">
<h3>7.1.2.1. The <a class="reference internal" href="#_xafs.ktoe" title="_xafs.ktoe"><tt class="xref py py-func docutils literal"><span class="pre">ktoe()</span></tt></a> and <a class="reference internal" href="#_xafs.etok" title="_xafs.etok"><tt class="xref py py-func docutils literal"><span class="pre">etok()</span></tt></a> functions<a class="headerlink" href="#the-ktoe-and-etok-functions" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="_xafs.etok">
<tt class="descclassname">_xafs.</tt><tt class="descname">etok</tt><big>(</big><em>energies</em><big>)</big><a class="headerlink" href="#_xafs.etok" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert photo-electron energy in eV to wavenumber in <img class="math" src="../_images/math/a9a5387c4e822040389d9d44578721dbdb911f7e.png" alt="\AA^{-1}"/>.
energies can be a single number or array of numbers.</p>
</dd></dl>

<dl class="function">
<dt id="_xafs.ktoe">
<tt class="descclassname">_xafs.</tt><tt class="descname">ktoe</tt><big>(</big><em>wavenumbers</em><big>)</big><a class="headerlink" href="#_xafs.ktoe" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert photo-electron wavenumber in <img class="math" src="../_images/math/a9a5387c4e822040389d9d44578721dbdb911f7e.png" alt="\AA^{-1}"/> ot energy in eV.
wavenumber can be a single number or array of numbers.</p>
</dd></dl>

<p>An example use would be to print out a table of energies and <img class="math" src="../_images/math/e9203da50e1059455123460d4e716c9c7f440cc3.png" alt="k"/> values:</p>
<div class="highlight-python"><div class="highlight"><pre>larch&gt; kvals = linspace(0, 25, 26)
larch&gt; evals = ktoe(kvals)
larch&gt; for k,e in zip(kvals, evals)):
larch&gt;      print &quot; %5.1f 1/Ang -&gt;  %8.2f eV&quot; %(k , e)
larch&gt; endfor
   0.0 1/Ang -&gt;      0.00 eV
   1.0 1/Ang -&gt;      3.81 eV
   2.0 1/Ang -&gt;     15.24 eV
   3.0 1/Ang -&gt;     34.29 eV
   4.0 1/Ang -&gt;     60.96 eV
   5.0 1/Ang -&gt;     95.25 eV
   6.0 1/Ang -&gt;    137.16 eV
   7.0 1/Ang -&gt;    186.69 eV
   8.0 1/Ang -&gt;    243.84 eV
   9.0 1/Ang -&gt;    308.61 eV
  10.0 1/Ang -&gt;    381.00 eV
  11.0 1/Ang -&gt;    461.01 eV
  12.0 1/Ang -&gt;    548.64 eV
  13.0 1/Ang -&gt;    643.89 eV
  14.0 1/Ang -&gt;    746.76 eV
  15.0 1/Ang -&gt;    857.25 eV
  16.0 1/Ang -&gt;    975.36 eV
  17.0 1/Ang -&gt;   1101.08 eV
  18.0 1/Ang -&gt;   1234.43 eV
  19.0 1/Ang -&gt;   1375.40 eV
  20.0 1/Ang -&gt;   1523.99 eV
  21.0 1/Ang -&gt;   1680.20 eV
  22.0 1/Ang -&gt;   1844.03 eV
  23.0 1/Ang -&gt;   2015.48 eV
  24.0 1/Ang -&gt;   2194.55 eV
  25.0 1/Ang -&gt;   2381.24 eV
</pre></div>
</div>
</div>
<div class="section" id="the-estimate-noise-function">
<h3>7.1.2.2. The <a class="reference internal" href="#_xafs.estimate_noise" title="_xafs.estimate_noise"><tt class="xref py py-func docutils literal"><span class="pre">estimate_noise()</span></tt></a> function<a class="headerlink" href="#the-estimate-noise-function" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="_xafs.estimate_noise">
<tt class="descclassname">_xafs.</tt><tt class="descname">estimate_noise</tt><big>(</big><em>k</em>, <em>chi=None</em>, <em>group=None</em>, <em>rmin=15</em>, <em>rmax=30</em>, <em>....</em><big>)</big><a class="headerlink" href="#_xafs.estimate_noise" title="Permalink to this definition">¶</a></dt>
<dd><p>Automatically estimate the noise level in a <img class="math" src="../_images/math/6afff318d648d1296604484ebd75631a75bc97b3.png" alt="\chi(k)"/> spectrum.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>k</strong> -- 1-d array of <img class="math" src="../_images/math/e9203da50e1059455123460d4e716c9c7f440cc3.png" alt="k"/></li>
<li><strong>chi</strong> -- 1-d array of <img class="math" src="../_images/math/f632c791f693410fc1bf07ad7cb02c6fcfef9aed.png" alt="\chi"/></li>
<li><strong>group</strong> -- output group.</li>
<li><strong>rmin</strong> -- minimum <img class="math" src="../_images/math/9d86170e7de539c0ff999de09621ee0c7b6c8ed0.png" alt="R"/> value for noise estimate.</li>
<li><strong>rmax</strong> -- maximum <img class="math" src="../_images/math/9d86170e7de539c0ff999de09621ee0c7b6c8ed0.png" alt="R"/> value for noise estimate.</li>
<li><strong>kweight</strong> -- exponent for weighting spectra by k**kweight [1]</li>
<li><strong>kmin</strong> -- starting k for FT Window [0]</li>
<li><strong>kmax</strong> -- ending k for FT Window  [20]</li>
<li><strong>dk</strong> -- tapering parameter for FT Window [4]</li>
<li><strong>dk2</strong> -- second tapering parameter for FT Window [None]</li>
<li><strong>window</strong> -- name of window type ['kaiser']</li>
<li><strong>nfft</strong> -- value to use for N_fft [2048].</li>
<li><strong>kstep</strong> -- value to use for delta_k ( Ang^-1) [0.05]</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>The method uses an XAFS Fourier transform, and many of arguments
(<strong>kmin</strong>, <strong>kmax</strong>, etc) are identical to those of <a class="reference internal" href="xafsft.html#_xafs.xftf" title="_xafs.xftf"><tt class="xref py py-func docutils literal"><span class="pre">xftf()</span></tt></a>.</p>
<p>This function follows the First Argument Group convention with arrarys named <cite>k</cite> and <cite>chi</cite>.
The following outputs are written to the supplied <strong>group</strong> (or <cite>_sys.xafsGroup</cite> if
<strong>group</strong> is not supplied):</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="18%" />
<col width="82%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">attribute</th>
<th class="head">meaning</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>epsilon_k</td>
<td>estimated noise level in <img class="math" src="../_images/math/6afff318d648d1296604484ebd75631a75bc97b3.png" alt="\chi(k)"/>.</td>
</tr>
<tr class="row-odd"><td>epsilon_r</td>
<td>estimated noise level in <img class="math" src="../_images/math/c61ed6f6f9e0f0c66a720cabdac4ad2c8fc5311e.png" alt="\chi(R)"/>.</td>
</tr>
<tr class="row-even"><td>kmax_suggest</td>
<td>suggested highest <img class="math" src="../_images/math/e9203da50e1059455123460d4e716c9c7f440cc3.png" alt="k"/> value for which <img class="math" src="../_images/math/10e9e3936e884fcf50cbe5306ec844cc5900e0eb.png" alt="|\chi(k)| &gt; \epsilon_k"/></td>
</tr>
</tbody>
</table>
</div></blockquote>
</dd></dl>

<p>This method uses the high-R portion of <img class="math" src="../_images/math/c61ed6f6f9e0f0c66a720cabdac4ad2c8fc5311e.png" alt="\chi(R)"/> (between <strong>rmin</strong>
and <strong>rmax</strong>) as a measure of the noise level in the <img class="math" src="../_images/math/c61ed6f6f9e0f0c66a720cabdac4ad2c8fc5311e.png" alt="\chi(R)"/> data
and uses Parseval's theorem to convert this noise level to that in
<img class="math" src="../_images/math/6afff318d648d1296604484ebd75631a75bc97b3.png" alt="\chi(k)"/>.  This method implicitly assumes that there is no signal in
the high-R portion of the spectrum, and that the noise in the spectrum is
&quot;white&quot; (independent of <img class="math" src="../_images/math/9d86170e7de539c0ff999de09621ee0c7b6c8ed0.png" alt="R"/>) .  Each of these assumptions can be
legitimately questioned.  Then again, making the assertion that these
assumptions are invalid and disregarding the estimated noise level here
would require knowledge of the noise in an XAFS spectrum that most users do
not have.  At the very least, this estimate should be be interpreted as a
minimal estimate of the noise level in <img class="math" src="../_images/math/6afff318d648d1296604484ebd75631a75bc97b3.png" alt="\chi(k)"/>.</p>
<p>The estimate for the output value <strong>kmax_suggest</strong> has a tendency to be
pessimistic in how far out the <img class="math" src="../_images/math/6afff318d648d1296604484ebd75631a75bc97b3.png" alt="\chi(k)"/> data goes before being
dominated by noise, but has the advantage of being an impartial measure of
data quality. It is particularly pessimistic for extremely good data.  Then
again, considering that the estimate for <img class="math" src="../_images/math/19bc0073dde1bcd1a8e6a32b251e80cced668f04.png" alt="\epsilon"/> is probably too
small, the estimate may not be that bad.</p>
</div>
<div class="section" id="the-xas-deconvolve-function">
<h3>7.1.2.3. The <a class="reference internal" href="#_xafs.xas_deconvolve" title="_xafs.xas_deconvolve"><tt class="xref py py-func docutils literal"><span class="pre">xas_deconvolve()</span></tt></a> function<a class="headerlink" href="#the-xas-deconvolve-function" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="_xafs.xas_deconvolve">
<tt class="descclassname">_xafs.</tt><tt class="descname">xas_deconvolve</tt><big>(</big><em>energy</em>, <em>norm=Noned group=None</em>, <em>form='gaussian'</em>, <em>esigma=1.0</em>, <em>eshift=0.0</em><big>)</big><a class="headerlink" href="#_xafs.xas_deconvolve" title="Permalink to this definition">¶</a></dt>
<dd><p>de-convolves a normalized mu(E) spectra with a peak shape, enhancing separation
of XANES features.  This procedure can be unstable -- Use results with caution!</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>energy</strong> -- 1-d array of <img class="math" src="../_images/math/cfd13a0f26eb7ef0093319a7669da7dd3771dbac.png" alt="E"/></li>
<li><strong>norm</strong> -- 1-d array of normalized <img class="math" src="../_images/math/7e398ab434f8ca3b65ac0d2dad7b7c17d806a642.png" alt="\mu(E)"/></li>
<li><strong>group</strong> -- output group</li>
<li><strong>form</strong> -- form of deconvolution function. One of
'gaussian' (default) or 'lorentzian'</li>
<li><strong>esigma</strong> -- energy <img class="math" src="../_images/math/2298cf1485084afe72757a9c8483af49a138d81f.png" alt="\sigma"/> (in eV) to pass to
<a class="reference internal" href="../fitting/lineshapes.html#gaussian" title="gaussian"><tt class="xref py py-func docutils literal"><span class="pre">gaussian()</span></tt></a> or <a class="reference internal" href="../fitting/lineshapes.html#lorentzian" title="lorentzian"><tt class="xref py py-func docutils literal"><span class="pre">lorentzian()</span></tt></a> lineshape [default=1.0]</li>
<li><strong>eshift</strong> -- energy shift (in eV) to apply to result. [default=0]</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Follows the First Argument Group convention, using group members named <tt class="docutils literal"><span class="pre">energy</span></tt> and <tt class="docutils literal"><span class="pre">norm</span></tt>.
The following data is put into the output group:</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="21%" />
<col width="79%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">attribute</th>
<th class="head">meaning</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>deconv</td>
<td>array of deconvolved, normalized <img class="math" src="../_images/math/7e398ab434f8ca3b65ac0d2dad7b7c17d806a642.png" alt="\mu(E)"/></td>
</tr>
</tbody>
</table>
</div></blockquote>
</dd></dl>

</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="preedge.html" title="7.2. XAFS: Pre-edge Subtraction and Normalization"
             >next</a> |</li>
        <li class="right" >
          <a href="index.html" title="7. XAFS Analysis"
             >previous</a> |</li>
   <li>[<a href="../contents.html">contents</a>|</li>
   <li><a href="../downloads/index.html">downloads</a>|</li>
   <li><a href="../tutorial/index.html">tutorial</a>|</li>
   <li><a href="../data/index.html">data</a>|</li>
   <li><a href="../plotting/index.html">plot</a>|</li>
   <li><a href="../fitting/index.html">fit</a>|</li>
   <li><a href="index.html">XAFS</a>|</li>
   <li><a href="../xray/index.html">Xray Data</a>|</li>
   <li><a href="../xrf/index.html">XRF</a>|</li>
   <li><a href="../devel/index.html">devel</a>]</li>

          <li><a href="index.html" >7. XAFS Analysis</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright Matthew Newville, The University of Chicago, 2012.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2.
    </div>
  </body>
</html>