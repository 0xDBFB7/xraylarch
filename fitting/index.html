

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>8. Fitting and Modeling Data &#8212; larch 0.9.35 documentation</title>
    <link rel="stylesheet" href="../_static/larchdoc.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.9.35',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="8.1. Fitting Overview" href="overview.html" />
    <link rel="prev" title="7. Plotting and Displaying Data" href="../plotting/index.html" />
  <script type="text/x-mathjax-config">
     MathJax.Hub.Config({ "TeX": {Macros: {AA : "{\\unicode{x212B}}"}},
			 "HTML-CSS": {scale: 90}});
  </script>

  </head>
  <body>
<div style=" color: #c5daba;  text-align: left; height:65px; padding: 0px">
<table border=1>
  <tr>
    <td width=20%>
	<a href="../index.html">
	 <img src="../_static/larchcones.png" height=60px alt="larchcones"/></a>
    </td>
    <td width=75% padding=0>
      <font size=+2>
	<a href="../index.html" style="color:#772211">
	  Larch: Data Analysis Tools for X-ray Spectroscopy
	</a>
      </font>
    </td>
   </tr></table>
</div>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="overview.html" title="8.1. Fitting Overview"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../plotting/index.html" title="7. Plotting and Displaying Data"
             accesskey="P">previous</a> |</li>
   <li>[<a href="../data/index.html">Reading Data</a>|</li>
   <li><a href="../plotting/index.html">Plotting</a>|</li>
   <li><a href="#">Fitting Data</a>|</li>
   <li><a href="../xafs/index.html">XAFS Analysis</a>|</li>
   <li><a href="../xray/index.html">Xray Databases</a>|</li>
   <li><a href="../xrf/index.html">XRF Analysis</a>|</li>
   <li><a href="../devel/index.html">Scripting</a>]</li>
 
      </ul>
    </div>

      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="../plotting/index.html"
                        title="previous chapter">7. Plotting and Displaying Data</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="overview.html"
                        title="next chapter">8.1. Fitting Overview</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/fitting/index.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="fitting-and-modeling-data">
<span id="fitting-chapter"></span><h1>8. Fitting and Modeling Data<a class="headerlink" href="#fitting-and-modeling-data" title="Permalink to this headline">¶</a></h1>
<p>A key motivation for Larch is to provide easy and robust ways to model data
and perform complex fits of data to models.  Data modeling and fitting can
be messy and challenging tasks, so a major factor in Larch’s design was to
make this as simple as possible.  This chapter discusses the basic concepts
for building models, setting up and performing fits, and inspecting the
results.</p>
<span class="target" id="module-_math"></span><p>The concepts presented here focus on modeling and fitting of general
spectra and data.  Of course, Larch can provides other, specific functions
for doing fits, such as the EXAFS procedures <a class="reference internal" href="../xafs/autobk.html#_xafs.autobk" title="_xafs.autobk"><code class="xref py py-func docutils literal"><span class="pre">_xafs.autobk()</span></code></a> and
<a class="reference internal" href="../xafs/feffit.html#_xafs.feffit" title="_xafs.feffit"><code class="xref py py-func docutils literal"><span class="pre">_xafs.feffit()</span></code></a>.  Many of these concepts (and the underlying fitting
algorithms) are used for those other functions as well.</p>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 0.9.34: </span>Several changes in the implementation of fitting were made in
0.9.34. All fitting now uses the <a class="reference external" href="https://lmfit.github.io/lmfit-py/">lmfit</a> package.  The use of
<cite>_sys.paramGroup</cite> as a group to hold default fitting parameters is no
longer used.  For constraint expressions, <cite>_sys.fiteval</cite> now holds the
expression evaluator used.</p>
</div>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="overview.html">8.1. Fitting Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="parameters.html">8.2. Parameters</a><ul>
<li class="toctree-l2"><a class="reference internal" href="parameters.html#setting-bounds">8.2.1. setting bounds</a></li>
<li class="toctree-l2"><a class="reference internal" href="parameters.html#using-algebraic-constraints">8.2.2. using algebraic constraints</a></li>
<li class="toctree-l2"><a class="reference internal" href="parameters.html#param-group-creating-a-parameter-group-for-fitting-constraints">8.2.3. <code class="docutils literal"><span class="pre">param_group()</span></code>: creating a Parameter Group for fitting constraints</a></li>
<li class="toctree-l2"><a class="reference internal" href="parameters.html#fiteval-and-details-about-algebraic-constraints">8.2.4. <cite>fiteval</cite> and details about algebraic constraints</a></li>
<li class="toctree-l2"><a class="reference internal" href="parameters.html#working-with-uncertainties">8.2.5. working with uncertainties</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="minimize.html">8.3. <code class="docutils literal"><span class="pre">minimize()</span></code> and objective Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="results.html">8.4. Fit Results and Outputs</a></li>
<li class="toctree-l1"><a class="reference internal" href="lineshapes.html">8.5. Some Builtin Line-shape Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">8.6. Fit Examples</a><ul>
<li class="toctree-l2"><a class="reference internal" href="examples.html#example-1-fitting-a-simple-gaussian">8.6.1. Example 1: Fitting a Simple Gaussian</a></li>
<li class="toctree-l2"><a class="reference internal" href="examples.html#example-2-fitting-xanes-pre-edge-peaks">8.6.2. Example 2: Fitting XANES Pre-edge Peaks</a></li>
<li class="toctree-l2"><a class="reference internal" href="examples.html#example-3-fitting-xanes-spectra-as-a-linear-combination-of-other-spectra">8.6.3. Example 3: Fitting XANES Spectra as a Linear Combination of Other Spectra</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="fitpeaks.html">8.7. Simplified Peak Fitting with <code class="docutils literal"><span class="pre">fit_peak()</span></code></a><ul>
<li class="toctree-l2"><a class="reference internal" href="fitpeaks.html#example-fitting-a-gaussian-background-with-fit-peak">8.7.1. Example: Fitting a Gaussian + background with <code class="docutils literal"><span class="pre">fit_peak()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="fitpeaks.html#example-fitting-a-rectangular-function-with-fit-peak">8.7.2. Example: Fitting a Rectangular function with <code class="docutils literal"><span class="pre">fit_peak()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="fitpeaks.html#using-lmfit-model">8.7.3. Using lmfit.Model</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="confidence.html">8.8. Advanced Confidence Intervals and Chi-square maps</a><ul>
<li class="toctree-l2"><a class="reference internal" href="confidence.html#confidence-interval-example-1">8.8.1. Confidence interval, Example 1</a></li>
<li class="toctree-l2"><a class="reference internal" href="confidence.html#confidence-interval-example-2">8.8.2. Confidence interval, Example 2</a></li>
<li class="toctree-l2"><a class="reference internal" href="confidence.html#chi-square-maps">8.8.3. Chi-square Maps</a></li>
</ul>
</li>
</ul>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="overview.html" title="8.1. Fitting Overview"
             >next</a> |</li>
        <li class="right" >
          <a href="../plotting/index.html" title="7. Plotting and Displaying Data"
             >previous</a> |</li>
   <li>[<a href="../data/index.html">Reading Data</a>|</li>
   <li><a href="../plotting/index.html">Plotting</a>|</li>
   <li><a href="#">Fitting Data</a>|</li>
   <li><a href="../xafs/index.html">XAFS Analysis</a>|</li>
   <li><a href="../xray/index.html">Xray Databases</a>|</li>
   <li><a href="../xrf/index.html">XRF Analysis</a>|</li>
   <li><a href="../devel/index.html">Scripting</a>]</li>
 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright Matthew Newville, The University of Chicago, 2012.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.6.3.
    </div>
  </body>
</html>